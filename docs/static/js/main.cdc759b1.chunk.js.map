{"version":3,"sources":["serviceWorkerRegistration.ts","lib/ky.ts","contexts/auth/AuthUserContext.tsx","components/pages/Login/LoginPresenter.tsx","components/pages/Login/Login.tsx","components/oraganisms/LauncherMenuList/LauncherMenuList.tsx","components/pages/MainMenu/MainMenuPresenter.tsx","components/pages/MainMenu/MainMenu.tsx","components/oraganisms/SideBar/SideBar.tsx","components/molecules/ErrorDialog/AlertDialog.tsx","components/oraganisms/BarcodeReader/BarcodeReader.tsx","components/molecules/ConfirmDialog/ConfirmDialog.tsx","components/pages/InjectionCheck/InjectionCheckPresenter.tsx","components/pages/InjectionCheck/InjectionCheck.tsx","components/oraganisms/NestList/NestListNode.tsx","components/oraganisms/NestList/NestListBranch.tsx","components/oraganisms/NestList/NestListTree.tsx","components/oraganisms/InjectionRouteNestList/InjectionRouteNestList.tsx","components/pages/InjectionExecute/injectionExecution.ts","components/oraganisms/StaffSelect/StaffSelectPresenter.tsx","components/oraganisms/StaffSelect/StaffSelect.tsx","components/pages/InjectionExecute/Drop/DropExecuteItemInput.tsx","components/pages/InjectionExecute/Drop/DropExecuteItem.tsx","components/pages/InjectionExecute/Drop/DropExecuteItemList.tsx","utils/age.ts","components/oraganisms/PatientCard/PatientCardPresenter.tsx","components/oraganisms/PatientCard/PatientCard.tsx","components/oraganisms/InjectionPatientCard/InjectionPatientCard.tsx","components/pages/InjectionExecute/Oneshot/OneShotExec.tsx","components/pages/InjectionExecute/Drop/DropExecute.tsx","components/pages/InjectionExecute/InjectionExecute.tsx","components/oraganisms/TransfusionPatientCard/TransfusionPatientCardPresenter.tsx","components/oraganisms/TransfusionPatientCard/TransfusionPatientCard.tsx","components/pages/TransfusionExecute/orderStatusUtil.ts","components/oraganisms/TransfusionExecuteTypeSelect/TransfusionExecuteTypeSelectPresenter.tsx","components/oraganisms/TransfusionExecuteTypeSelect/TransfusionExecuteTypeSelect.tsx","components/molecules/MultipleSelect/MultipleSelectPresenter.tsx","components/molecules/MultipleSelect/MultipleSelect.tsx","components/oraganisms/SideEffectSelect/SideEffectSelectPresenter.tsx","components/oraganisms/SideEffectSelect/SideEffectSelect.tsx","hooks/useDisclosure.ts","components/molecules/SplitButton/SplitButtonPresenter.tsx","components/molecules/SplitButton/SplitButton.tsx","components/pages/TransfusionExecute/TransfusionExecutePresenter.tsx","components/pages/TransfusionExecute/TransfusionExecute.tsx","components/pages/TransfusionCheck/TransfusionCheckPresenter.tsx","components/pages/TransfusionCheck/TransfusionCheck.tsx","contexts/AppProvider.tsx","components/oraganisms/Header/Header.tsx","App.tsx","mocks/index.ts","index.tsx"],"names":["isLocalhost","Boolean","window","location","hostname","exec","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","kyCustom","ky","create","prefixUrl","process","AuthUserContext","createContext","AuthOperationContext","login","_","Error","logout","useAuthUser","useContext","AuthUserProvider","children","useState","authUser","setAuthUser","inputUser","a","staffId","password","post","json","timeout","res","loggedIn","staffName","Provider","value","schema","yup","required","LoginPresenter","onLogin","useForm","resolver","yupResolver","handleSubmit","errors","formState","Container","maxWidth","Stack","spacing","TextField","id","label","type","defaultValue","helperText","message","autoComplete","Button","variant","onClick","Login","menus","MenuCardContent","displayName","description","navigation","navigate","useNavigate","CardContent","Typography","component","sx","mb","color","CardActions","size","LauncherMenuList","Box","flexGrow","Grid","container","map","item","xs","Card","MainMenuPresenter","MainMenu","DrawerList","styled","width","DrawerHeader","height","display","flexDirection","justifyContent","alignItems","padding","backgroundColor","indigo","DrawerAvatar","Avatar","theme","pink","SideBar","drawerOpen","toggleDrawer","onOpen","Drawer","open","onClose","role","pjson","version","List","Divider","ListItem","button","ListItemIcon","ListItemText","secondary","Alert","Dialog","fontFamily","AlertDialog","alertOpen","toggleAlert","onEmpty","DialogTitle","DialogContent","DialogContentText","split","filter","DialogActions","autoFocus","BarcodeReader","onScan","scanResult","setScanResult","sameScanCount","setSameScanCount","setOpen","handleDetected","data","code","codeResult","c","before","useEffect","Quagga","init","inputStream","constraints","min","facingMode","aspectRatio","max","locator","patchSize","halfSample","numOfWorkers","frequency","decoder","readers","locate","start","stop","onDetected","className","style","ComfirmDialog","dialogOpen","onClickOK","onClickCancel","InjectionCheckPresenter","patientId","orderHeaderId","onLogout","setDialogOpen","transit","onChangePatientId","onChangeOrderId","onChangeOrderHeaderId","paddingTop","focused","InputProps","startAdornment","InputAdornment","position","AccountCircle","fullWidth","onChange","event","target","InjectionCheck","setDrawerOpen","setPatientId","setOrderHeaderId","inputCode","setInputCode","zeroSuppressCode","Number","String","NestListNode","props","isExistChildren","level","onToggle","onItemSelect","ListItemButton","pl","primary","NestListBranch","nestListItemClickAction","undefined","length","newLevel","child","Collapse","in","unmountOnExit","disablePadding","itemId","renderBranches","NestListTree","treeItems","InjectionRouteNestList","listDatas","bgcolor","subheader","ListSubheader","treeItem","doExecution","execute","patch","alert","StaffSelectPresenter","staffNames","handleClickIcon","handleOnChange","disabled","FormControl","direction","options","newValue","renderInput","params","IconButton","FormHelperText","getStaffName","staff","firstName","lastName","StaffSelect","defaultStaffId","staffs","setStaffs","setStaffNames","auth","loadStaffs","get","staffsResult","staffNameList","s","targetStaff","find","getStaffNameById","input","DropExecuteItemInput","defaultExecute","onInput","executes","isShowRemainAmount","totalAmount","reserveDate","injectionExecutionId","dropRecordId","setDropRecordId","openInjectionRouteDialog","setOpenInjectionRouteDialog","injectionRouteNestListOpen","injectionRouteMstId","injectionRouteId","setInjectionRouteId","nestListDatas","setNestListDatas","injectionRouteName","setInjectionRouteName","executionDropSpeed","dropSpeed","setDropSpeed","executionStartDate","startDate","setStartDate","startStaff","setStartStaff","executionEndDate","endDate","setEndDate","endStaff","setEndStaff","executionCommentId","executeCommentId","setExecuteCommentId","executionFreeComment","executeCommentValue","setExecuteCommentValue","executionAmount","amount","setAmount","remainAmount","setRemainAmount","endCommentId","setEndCommentId","endFreeComment","endCommentValue","setEndCommentValue","endCommentDatas","setEndCommentDatas","executeCommentDatas","setExecuteCommentDatas","injectionRouteError","setInjectionRouteError","injectionRouteErrorHelperText","setInjectionRouteErrorHelperText","dropSpeedError","setDropSpeedError","dropSpeedErrorHelperText","setDropSpeedErrorHelperText","startDateError","setStartDateError","startDateErrorHelperText","setStartDateErrorHelperText","startStaffError","setStartStaffError","startStaffErrorHelperText","setStartStaffErrorHelperText","endStaffError","setEndStaffError","endStaffErrorHelperText","setEndStaffErrorHelperText","amountError","setAmountError","amountErrorHelperText","setAmountErrorHelperText","endDateError","setEndDateError","endDateErrorHelperText","setEndDateErrorHelperText","isImiidateEnd","some","e","inputCheck","isEndAdd","isNotFinishError","lastRow","lastRowIndex","findIndex","isStartDateError","isInjectionRouteInputError","isBefore","Date","isAfter","isStartStaffInputError","isEndDateError","isEndStaffInputError","isAmountInputError","load","searchParams","result","executeCommentItems","endCommentItems","routeNestDatas","amountSum","forEach","remain","noValidate","paddingLeft","readOnly","injectionRouteData","endAdornment","InputLabelProps","shrink","executionStartId","isDropSpeedInputError","isStartDateInputError","isEndDateInputError","isEndDateFutureDateError","second","getTime","toFixed","freeSolo","content","getOptionLabel","option","executionEndId","DropExecuteItem","onClickDeleteButton","isLastRow","injectionOrder","updateInputDialog","setUpdateInputDialog","inputExecute","setInputExecute","openUpdateInputDialog","minWidth","fontSize","format","DropExecuteItemList","dropItemList","deleteAction","getAge","birthday","today","thisYearsBirthday","getFullYear","getMonth","getDate","age","PatientCardPresenter","patient","cardActions","cardContent","displayContent","birthDate","formatBirthDate","toString","CardHeader","avatar","title","gutterBottom","sex","bloodType","rhFactor","CircularProgress","margin","PatientCard","setPatient","loadPatient","patientResult","InjectionPatientCard","inputDisplayType","deleteExecuteItem","expanded","setExpanded","displayType","setDisplayType","handleExpandClick","selectedDisplayType","execType","createStatusSummary","issueStaffName","issueDate","departmentName","instructedName","instructedDate","completeName","completeDate","orderStatusName","plansDate","substring","summary","FabButton","Fab","right","bottom","OneShotExec","editable","orderStatus","successBarOpen","setSuccessBarOpen","errorBarOpen","setErrorBarOpen","execList","oneShotRecord","injectionRouteNameTextFieldValue","setInjectionRouteNameTextFieldValue","startStaffId","setStartStaffId","decimalNumber","splitValue","getNumberLength","getDecimalLength","executeComment","executeButtonAction","executeData","updateId","end","Backdrop","zIndex","drawer","Snackbar","autoHideDuration","severity","mr","Autocomplete","DropExecute","isEndFlg","setEndFlg","setExecutes","f","endFlg","InjectionExecute","useParams","injectionOrderData","setInjectionOrderData","errorText","setErrorText","useCallback","mainClass","executableFutureDay","preferredDate","instructedStatus","forcingInstracted","checkOrder","instructOrder","put","userId","ConfirmDialog","TransfusionPatientCardPresenter","status","index","isExecuteTarget","opacity","formulationName","formulationNo","executeDate","executeStaffName","executeTypeName","filterTypeName","sideEffectNames","TransfusionPatientCard","crateStatusSummary","order","issueName","deputeIssueName","auditName","auditDate","statusName","getStatusName","replaceAll","TransfusionExecuteTypeSelectPresenter","execTypeItems","defaultExecuteType","InputLabel","Select","labelId","MenuItem","name","TransfusionExecuteTypeSelect","displayExecuteTypes","executeTypes","setExecuteTypes","executeResult","filteredExecuteTypes","d","selected","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","MultipleSelectPresenter","items","values","selectedNames","selectedValues","selectedValue","selectedNameValue","getSelectedNames","m","multiple","slice","sort","selectedNameValues","v","OutlinedInput","renderValue","join","Checkbox","checked","MultipleSelect","SideEffectSelectPresenter","sideEffectIds","SideEffectSelect","sideEffects","setSideEffects","sideEffectItems","setSideEffectItems","sideEffectName","sideEffectMstId","selectedSideEffects","i","useDisclosure","initial","isOpen","setIsOpen","close","toggle","SplitButtonPresenter","defaultSelectedIndex","fixed","anchorRef","useRef","selectedIndex","setSelectedIndex","handleClose","current","contains","ButtonGroup","ref","Popper","anchorEl","transition","disablePortal","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","handleMenuItemClick","SplitButton","executeStaffId","executeType","filterType","TranfusionExecutePresenter","transfusionOrder","deliveryFormulation","handleExecute","formulationCode","deliveryFormulations","formulation","targetFormulationNo","targetFormulationCode","toTransfusionExecute","targetExecute","defaultValues","control","onSubmit","inputForm","render","field","TranfusionExecute","setOrder","setDeliveryFormulation","isLoading","setLoading","transfusionResult","formurations","targetFormulation","transfusionOrderPatch","updateStaffId","red","TransfusionCheckPresenter","formurationCode","formurationNumber","TransfusionCheck","setFormurationCode","setFormurationNumber","ErrorFallback","assign","origin","AppProvider","FallbackComponent","Header","onDrawerToggle","AppBar","Toolbar","sm","edge","PrivateOutlet","isAuthenticated","to","UnAuthOutlet","App","basename","path","element","initMock","ReactDOM","StrictMode","document","getElementById","URL","href","addEventListener","fetch","headers","response","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.cdc759b1.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/.exec(\n      window.location.hostname,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import ky from 'ky';\n\nconst kyCustom = ky.create({\n  prefixUrl: process.env.REACT_APP_API_URL ? process.env.REACT_APP_API_URL : '',\n});\n\nexport default kyCustom;\n","import { createContext, FC, useContext, useState } from 'react';\nimport ky from '@/lib/ky';\nimport AuthUser from '../../types/auth';\n\ntype InputUser = {\n  staffId: string;\n  password: string;\n};\n\ntype OperationType = {\n  login: (userId: InputUser) => void;\n  logout: () => void;\n};\n\nconst AuthUserContext = createContext<AuthUser | null>(null);\nconst AuthOperationContext = createContext<OperationType>({\n  login: (_) => new Error('Providerが設定されていません'),\n  logout: () => new Error('Providerが設定されていません'),\n});\n\nconst AuthUserProvider: FC = ({ children }) => {\n  const [authUser, setAuthUser] = useState<AuthUser | null>(null);\n\n  const login = async (inputUser: InputUser) => {\n    const { staffId, password } = inputUser;\n    try {\n      const res = await ky\n        .post('login', {\n          json: {\n            staffId,\n            password,\n          },\n          timeout: false,\n        })\n        .json<AuthUser>();\n\n      console.log(res);\n\n      if (res.loggedIn) {\n        setAuthUser(res);\n      } else {\n        // alert('ログインに失敗しました。');\n      }\n    } catch (err) {\n      setAuthUser({\n        loggedIn: true,\n        staffId: '99999999',\n        staffName: 'テスト職員',\n      });\n    }\n  };\n\n  const logout = () => {\n    // await login() //ログアウト処理\n    setAuthUser(null);\n  };\n\n  return (\n    <AuthOperationContext.Provider value={{ login, logout }}>\n      <AuthUserContext.Provider value={authUser}>\n        {children}\n      </AuthUserContext.Provider>\n    </AuthOperationContext.Provider>\n  );\n};\n\nexport const useAuthUser = (): AuthUser | null => useContext(AuthUserContext);\nexport const useLogin: () => (inputUser: InputUser) => void = () =>\n  useContext(AuthOperationContext).login;\nexport const useLogout: () => () => void = () =>\n  useContext(AuthOperationContext).logout;\n\nexport default AuthUserProvider;\n","import { VFC } from 'react';\nimport { Button, Container, Stack, TextField } from '@mui/material';\nimport { SubmitHandler, useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\ntype Props = {\n  onLogin: (staffId: string, password: string) => void;\n};\n\ntype LoginInput = {\n  staffId: string;\n  password: string;\n  sample: string;\n};\n\nconst schema = yup.object({\n  staffId: yup.string().required('職員IDを入力してください。'),\n  password: yup.string().required('パスワードを入力してください。'),\n});\n\nconst LoginPresenter: VFC<Props> = ({ onLogin }) => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginInput>({\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit: SubmitHandler<LoginInput> = ({ staffId, password }) => {\n    onLogin(staffId, password);\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Stack spacing={2}>\n        <TextField\n          id=\"staff-id\"\n          label=\"職員ID\"\n          type=\"number\"\n          required\n          defaultValue=\"10008\"\n          error={'staffId' in errors}\n          helperText={errors.staffId?.message}\n          {...register('staffId')}\n        />\n        <TextField\n          id=\"staff-password\"\n          label=\"パスワード\"\n          type=\"password\"\n          required\n          defaultValue=\"Llanowar12$\"\n          autoComplete=\"current-password\"\n          error={'password' in errors}\n          helperText={errors.password?.message}\n          {...register('password')}\n        />\n        <Button variant=\"contained\" onClick={handleSubmit(onSubmit)}>\n          ログイン\n        </Button>\n      </Stack>\n    </Container>\n  );\n};\n\nexport default LoginPresenter;\n","import { VFC } from 'react';\nimport { useLogin } from '../../../contexts/auth/AuthUserContext';\nimport LoginPresenter from './LoginPresenter';\n\nconst Login: VFC = () => {\n  const login = useLogin();\n\n  const onLogin = (staffId: string, password: string) => {\n    void login({ staffId, password });\n  };\n\n  return <LoginPresenter onLogin={onLogin} />;\n};\n\nexport default Login;\n","import { VFC } from 'react';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  Typography,\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport LauncherMenuDefinition from './LauncherMenuDefinition.json';\n\ntype LauncherMenuProps = {\n  displayName: string;\n  description: string;\n  navigation: string;\n};\n\nconst menus: LauncherMenuProps[] = LauncherMenuDefinition;\n\nconst MenuCardContent: VFC<LauncherMenuProps> = ({\n  displayName,\n  description,\n  navigation,\n}) => {\n  const navigate = useNavigate();\n\n  return (\n    <>\n      <CardContent>\n        <Typography variant=\"h5\" component=\"div\">\n          {displayName}\n        </Typography>\n        <Typography sx={{ mb: 1.5 }} color=\"text.secondary\">\n          {description}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          onClick={() => navigate(navigation)}\n        >\n          Start\n        </Button>\n      </CardActions>\n    </>\n  );\n};\n\nconst LauncherMenuList: VFC = () => (\n  <Box sx={{ flexGrow: 1 }}>\n    <Grid container spacing={1}>\n      {menus.map(({ displayName, description, navigation }) => (\n        <Grid item xs={6} key={displayName}>\n          <Card variant=\"outlined\">\n            <MenuCardContent\n              displayName={displayName}\n              description={description}\n              navigation={navigation}\n            />\n          </Card>\n        </Grid>\n      ))}\n    </Grid>\n  </Box>\n);\n\nexport default LauncherMenuList;\n","import { VFC } from 'react';\n\nimport LauncherMenuList from '../../oraganisms/LauncherMenuList/LauncherMenuList';\n\nconst MainMenuPresenter: VFC = () => (\n  <>\n    <LauncherMenuList />\n  </>\n);\n\nexport default MainMenuPresenter;\n","import { VFC } from 'react';\nimport MainMenuPresenter from './MainMenuPresenter';\n\nconst MainMenu: VFC = () => <MainMenuPresenter />;\n\nexport default MainMenu;\n","import { VFC } from 'react';\nimport List from '@mui/material/List';\nimport Avatar from '@mui/material/Avatar';\nimport Drawer from '@mui/material/Drawer';\nimport Divider from '@mui/material/Divider';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\n\nimport ShareIcon from '@mui/icons-material/Share';\nimport PersonIcon from '@mui/icons-material/Person';\n\nimport { styled } from '@mui/material/styles';\nimport { indigo, pink } from '@mui/material/colors';\n\nimport pjson from '../../../../package.json';\n\ntype Props = {\n  drawerOpen: boolean;\n  toggleDrawer: () => void;\n  onOpen: () => void;\n};\n\nconst DrawerList = styled('div')(() => ({\n  width: 250,\n}));\n\nconst DrawerHeader = styled('div')(() => ({\n  height: 150,\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'center',\n  padding: '1em',\n  backgroundColor: indigo[500],\n  color: '#ffffff',\n}));\n\nconst DrawerAvatar = styled(Avatar)(({ theme }) => ({\n  backgroundColor: pink[500],\n  width: theme.spacing(6),\n  height: theme.spacing(6),\n}));\n\nconst SideBar: VFC<Props> = ({ drawerOpen = false, toggleDrawer, onOpen }) => (\n  <Drawer variant=\"temporary\" open={drawerOpen} onClose={toggleDrawer}>\n    <DrawerList role=\"presentation\" onClick={toggleDrawer}>\n      <DrawerHeader>\n        <DrawerAvatar>\n          <PersonIcon />\n        </DrawerAvatar>\n        <p>Version : v{pjson.version}</p>\n      </DrawerHeader>\n      <List>\n        <Divider />\n        <ListItem button onClick={onOpen} aria-label=\"share\">\n          <ListItemIcon>\n            <ShareIcon />\n          </ListItemIcon>\n          <ListItemText secondary=\"このアプリを共有\" />\n        </ListItem>\n      </List>\n    </DrawerList>\n  </Drawer>\n);\n\nexport default SideBar;\n","import { VFC } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport { styled } from '@mui/material/styles';\nimport { Typography } from '@mui/material';\n\ntype Props = {\n  message: string;\n  alertOpen: boolean;\n  toggleAlert: () => void;\n  onEmpty: () => void;\n};\n\nconst Alert = styled(Dialog)(() => ({\n  fontFamily: '-apple-system, BlinkMacSystemFont, Roboto, sans-serif',\n}));\n\nconst AlertDialog: VFC<Props> = ({\n  message = '本当にごみ箱を完全に空にしますか？',\n  alertOpen,\n  toggleAlert,\n  onEmpty,\n}) => (\n  <Alert open={alertOpen} onClose={toggleAlert}>\n    <DialogTitle>バーコード読取</DialogTitle>\n    <DialogContent>\n      <DialogContentText>\n        {message\n          .split(/(\\n)/)\n          .filter((item) => /\\n/.exec(item) === null)\n          .map((item) => (\n            <Typography>{item}</Typography>\n          ))}\n      </DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={toggleAlert} color=\"primary\" aria-label=\"cancel\">\n        キャンセル\n      </Button>\n      <Button\n        onClick={() => {\n          toggleAlert();\n          onEmpty();\n        }}\n        color=\"secondary\"\n        aria-label=\"ok\"\n        autoFocus\n      >\n        OK\n      </Button>\n    </DialogActions>\n  </Alert>\n);\n\nexport default AlertDialog;\n","// eslint-disable-next-line no-unused-vars\nimport { VFC, useState, useEffect } from 'react';\nimport Quagga from '@ericblade/quagga2';\nimport AlertDialog from '../../molecules/ErrorDialog/AlertDialog';\n\ntype Props = {\n  onScan?: (code: string) => void;\n};\n\nconst BarcodeReader: VFC<Props> = ({ onScan }) => {\n  const [scanResult, setScanResult] = useState<string>('');\n  const [sameScanCount, setSameScanCount] = useState<number>(0);\n  const [open, setOpen] = useState<boolean>(false);\n\n  const handleDetected = (data: { codeResult: { code: string | null } }) => {\n    const { code } = data.codeResult;\n\n    if (code == null) {\n      return;\n    }\n\n    if (code === scanResult) {\n      setSameScanCount((c) => c + 1);\n    }\n\n    setScanResult((before) => {\n      if (code === before) {\n        setSameScanCount((c) => c + 1);\n      }\n\n      return code;\n    });\n    setOpen(false);\n\n    // setOpen(false);\n  };\n\n  useEffect(() => {\n    if (onScan && sameScanCount >= 2) {\n      // 読み取り\n      setSameScanCount(0);\n      onScan(scanResult);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sameScanCount]);\n\n  useEffect(() => {\n    void Quagga.init(\n      {\n        inputStream: {\n          type: 'LiveStream',\n          constraints: {\n            width: { min: 200 },\n            height: { min: 200 },\n            facingMode: 'environment',\n            aspectRatio: { min: 1, max: 1 },\n          },\n        },\n        locator: {\n          patchSize: 'medium',\n          halfSample: false,\n        },\n        numOfWorkers: 2,\n        frequency: 10,\n        decoder: {\n          readers: ['codabar_reader', 'ean_reader', 'code_128_reader'],\n        },\n        locate: true,\n      },\n      (_) => {\n        // if (err) {\n        //   console.log(err, 'error msg');\n        // }\n\n        Quagga.start();\n\n        return () => {\n          void Quagga.stop();\n        };\n      },\n    );\n\n    Quagga.onDetected(handleDetected);\n\n    return () => {\n      void Quagga.stop();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    // If you do not specify a target,\n    // QuaggaJS would look for an element that matches\n    // the CSS selector #interactive.viewport\n    <>\n      <div id=\"interactive\" className=\"viewport\" style={{ width: '100%' }} />\n      <p>{scanResult || '読み取り中...'}</p>\n      <AlertDialog\n        message={scanResult || 'empty'}\n        alertOpen={open}\n        onEmpty={() => setOpen(false)}\n        toggleAlert={() => setScanResult('')}\n      />\n    </>\n  );\n};\n\nexport default BarcodeReader;\n","import { VFC } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport { Typography } from '@mui/material';\n\ntype Props = {\n  message: string;\n  dialogOpen: boolean;\n  onClickOK: () => void;\n  onClickCancel: () => void;\n  onClose: () => void;\n};\n\nconst ComfirmDialog: VFC<Props> = ({\n  message = '',\n  dialogOpen,\n  onClickOK,\n  onClickCancel,\n  onClose,\n}) => (\n  <Dialog open={dialogOpen}>\n    <DialogTitle>確認</DialogTitle>\n    <DialogContent>\n      <DialogContentText>\n        {message\n          .split(/(\\n)/)\n          .filter((item) => /\\n/.exec(item) === null)\n          .map((item) => (\n            <Typography>{item}</Typography>\n          ))}\n      </DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button\n        onClick={() => {\n          onClose();\n          onClickCancel();\n        }}\n        color=\"primary\"\n        aria-label=\"cancel\"\n      >\n        キャンセル\n      </Button>\n      <Button\n        onClick={() => {\n          onClose();\n          onClickOK();\n        }}\n        color=\"secondary\"\n        aria-label=\"ok\"\n        autoFocus\n      >\n        OK\n      </Button>\n    </DialogActions>\n  </Dialog>\n);\n\nexport default ComfirmDialog;\n","import { FC } from 'react';\nimport { Box, Grid, InputAdornment, TextField } from '@mui/material';\nimport { AccountCircle } from '@mui/icons-material';\nimport SideBar from '@/components/oraganisms/SideBar/SideBar';\nimport BarcodeReader from '@/components/oraganisms/BarcodeReader/BarcodeReader';\nimport ComfirmDialog from '@/components/molecules/ConfirmDialog/ConfirmDialog';\n\ntype Props = {\n  drawerOpen: boolean;\n  toggleDrawer: () => void;\n  onLogout: () => void;\n  patientId: string;\n  orderHeaderId: string;\n  onScan: (code: string) => void;\n  dialogOpen: boolean;\n  setDialogOpen: (dialogOpen: boolean) => void;\n  transit: () => void;\n  onChangePatientId: (patientId: string) => void;\n  onChangeOrderHeaderId: (orderHeaderId: string) => void;\n};\n\nconst InjectionCheckPresenter: FC<Props> = ({\n  drawerOpen,\n  patientId,\n  orderHeaderId,\n  dialogOpen,\n  toggleDrawer,\n  onLogout,\n  onScan,\n  setDialogOpen,\n  transit,\n  onChangePatientId,\n  onChangeOrderHeaderId: onChangeOrderId,\n}) => (\n  <>\n    <SideBar\n      drawerOpen={drawerOpen}\n      toggleDrawer={toggleDrawer}\n      onOpen={onLogout}\n    />\n    <ComfirmDialog\n      dialogOpen={dialogOpen}\n      message={`患者ID：${patientId}\n      オーダID：${orderHeaderId}`}\n      onClickCancel={() => {\n        setDialogOpen(false);\n      }}\n      onClickOK={() => {\n        transit();\n      }}\n      onClose={() => {\n        setDialogOpen(false);\n      }}\n    />\n    <Box\n      paddingTop=\"25px\"\n      sx={{\n        flexGrow: 1,\n      }}\n    >\n      <Grid container spacing={2}>\n        <Grid item xs={6}>\n          <TextField\n            id=\"patient-id\"\n            label=\"患者ID\"\n            color=\"success\"\n            value={patientId}\n            focused={!!patientId}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <AccountCircle />\n                </InputAdornment>\n              ),\n            }}\n            fullWidth\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n              onChangePatientId(event.target.value);\n            }}\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <TextField\n            id=\"order-id\"\n            label=\"オーダID\"\n            color=\"success\"\n            value={orderHeaderId}\n            focused={!!orderHeaderId}\n            fullWidth\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n              onChangeOrderId(event.target.value);\n            }}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <BarcodeReader onScan={onScan} />\n        </Grid>\n      </Grid>\n    </Box>\n  </>\n);\n\nexport default InjectionCheckPresenter;\n","import { FC, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLogout } from '@/contexts/auth/AuthUserContext';\nimport InjectionCheckPresenter from '@/components/pages/InjectionCheck/InjectionCheckPresenter';\n\nconst InjectionCheck: FC = () => {\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false);\n  const [patientId, setPatientId] = useState<string>('');\n  const [orderHeaderId, setOrderHeaderId] = useState<string>('');\n  const [inputCode, setInputCode] = useState<string>('');\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n  const logout = useLogout();\n  const navigate = useNavigate();\n  const toggleDrawer = () => setDrawerOpen(!drawerOpen);\n  const onLogout = () => logout();\n\n  const onScan = (code: string) => {\n    const zeroSuppressCode = Number(code);\n\n    setInputCode(String(zeroSuppressCode));\n  };\n\n  useEffect(() => {\n    if (!patientId) {\n      setPatientId(inputCode);\n    } else if (!orderHeaderId) {\n      setOrderHeaderId(inputCode);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputCode]);\n\n  useEffect(() => {\n    if (patientId && orderHeaderId) {\n      setDialogOpen(true);\n    }\n  }, [orderHeaderId, patientId]);\n\n  return (\n    <InjectionCheckPresenter\n      drawerOpen={drawerOpen}\n      toggleDrawer={toggleDrawer}\n      onLogout={onLogout}\n      patientId={patientId}\n      orderHeaderId={orderHeaderId}\n      onScan={onScan}\n      dialogOpen={dialogOpen}\n      setDialogOpen={setDialogOpen}\n      transit={() =>\n        navigate(`/injectionexecute/${patientId}/${orderHeaderId}`)\n      }\n      onChangePatientId={setPatientId}\n      onChangeOrderHeaderId={setOrderHeaderId}\n    />\n  );\n};\n\nexport default InjectionCheck;\n","import { FC } from 'react';\nimport { ListItemButton, ListItemText } from '@mui/material';\n\nimport ExpandLess from '@mui/icons-material/ExpandLess';\nimport ExpandMore from '@mui/icons-material/ExpandMore';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\n\ntype Props = {\n  item: TreeItem;\n  isExistChildren: boolean;\n  level: number;\n  onToggle: (isSelect: boolean) => void;\n  onItemSelect: (treeItem: TreeItem) => void;\n  open: boolean;\n};\n\nconst NestListNode: FC<Props> = (props) => {\n  const { item, isExistChildren, level, onToggle, onItemSelect, open } = props;\n\n  return (\n    <>\n      <ListItemButton sx={{ pl: 4 * level }}>\n        <ListItemText\n          primary={item.value}\n          onClick={\n            isExistChildren ? () => onToggle(!open) : () => onItemSelect(item)\n          }\n        />\n        {isExistChildren && (open ? <ExpandLess /> : <ExpandMore />)}\n      </ListItemButton>\n    </>\n  );\n};\n\nexport default NestListNode;\n","import { FC, useState } from 'react';\nimport { List, Collapse } from '@mui/material';\nimport NestListNode from '@/components/oraganisms/NestList/NestListNode';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\n\ntype Props = {\n  item: TreeItem;\n  level: number;\n  nestListItemClickAction: (treeItem: TreeItem) => void;\n};\n\nconst NestListBranch: FC<Props> = (props) => {\n  const { item, level, nestListItemClickAction } = props;\n\n  const isExistChildren =\n    item.children !== null &&\n    item.children !== undefined &&\n    item.children.length !== 0;\n\n  const [open, setOpen] = useState(false);\n\n  const renderBranches = () => {\n    if (isExistChildren) {\n      const newLevel = level + 1;\n\n      return item.children?.map((child) => (\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\n          <List disablePadding>\n            <NestListBranch\n              key={child?.itemId}\n              item={child}\n              level={newLevel}\n              nestListItemClickAction={nestListItemClickAction}\n            />\n          </List>\n        </Collapse>\n      ));\n    }\n\n    return null;\n  };\n\n  return (\n    <>\n      <NestListNode\n        item={item}\n        isExistChildren={isExistChildren}\n        level={level}\n        onToggle={setOpen}\n        onItemSelect={nestListItemClickAction}\n        open={open}\n      />\n\n      {open && renderBranches()}\n    </>\n  );\n};\n\nexport default NestListBranch;\n","import { FC } from 'react';\nimport NestListBranch from './NestListBranch';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\n\ntype Props = {\n  treeItems: TreeItem[];\n  nestListItemClickAction: (treeItem: TreeItem) => void;\n};\n\nconst NestListTree: FC<Props> = (props) => {\n  const { treeItems, nestListItemClickAction } = props;\n\n  return (\n    <>\n      {treeItems.map((item) => (\n        <NestListBranch\n          key={item.itemId}\n          item={item}\n          level={0}\n          nestListItemClickAction={nestListItemClickAction}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default NestListTree;\n","import { FC } from 'react';\nimport { List, ListSubheader } from '@mui/material';\nimport NestListTree from '@/components/oraganisms/NestList/NestListTree';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\n\ntype Props = {\n  listDatas: TreeItem[];\n  nestListItemClickAction: (injectionRouteName: TreeItem) => void;\n};\n\nconst InjectionRouteNestList: FC<Props> = ({\n  nestListItemClickAction,\n  listDatas,\n}) => {\n  // ネストリストの末端の項目を選択した時のアクション\n  const nestListItemClick = (treeItem: TreeItem) => {\n    nestListItemClickAction(treeItem);\n  };\n\n  return (\n    <>\n      <List\n        sx={{ width: '100%', maxWidth: 360, bgcolor: 'background.paper' }}\n        component=\"nav\"\n        aria-labelledby=\"nested-list-subheader\"\n        subheader={\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n            投与ルート選択\n          </ListSubheader>\n        }\n      >\n        <NestListTree\n          treeItems={listDatas}\n          nestListItemClickAction={nestListItemClick}\n        />\n      </List>\n    </>\n  );\n};\n\nexport default InjectionRouteNestList;\n","import ky from '@/lib/ky';\nimport { ExecuteResult } from '@/components/pages/InjectionExecute/executeResult';\nimport { InjectionExecutePatch } from '@/components/pages/InjectionExecute/injectionExecutePatch';\n\nconst doExecution = async (\n  execute: InjectionExecutePatch,\n): Promise<boolean> => {\n  try {\n    await ky\n      .patch(`orders/injections`, {\n        json: execute,\n        timeout: false,\n      })\n      .json<ExecuteResult>();\n\n    return true;\n  } catch (err) {\n    // eslint-disable-next-line no-alert\n    alert(err);\n\n    return false;\n  }\n};\n\nexport default doExecution;\n","import { VFC } from 'react';\nimport {\n  Autocomplete,\n  FormControl,\n  FormHelperText,\n  IconButton,\n  Stack,\n  TextField,\n} from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\n\ntype Props = {\n  staffNames: string[];\n  handleClickIcon: () => void;\n  handleOnChange: (input: string | null) => void;\n  staffName?: string;\n  label?: string;\n  error?: boolean;\n  helperText?: string;\n  disabled?: boolean;\n};\n\nconst StaffSelectPresenter: VFC<Props> = ({\n  staffNames,\n  handleClickIcon,\n  handleOnChange,\n  staffName,\n  label,\n  error,\n  helperText,\n  disabled,\n}) => (\n  <>\n    <FormControl error={error}>\n      <Stack spacing={0}>\n        <Stack direction=\"row\" spacing={0}>\n          <Autocomplete\n            id=\"combo-box-demo\"\n            options={staffNames}\n            value={staffName}\n            onChange={(_, newValue: string | null) => handleOnChange(newValue)}\n            sx={{ width: 300 }}\n            renderInput={(params) => (\n              <TextField {...params} error={error} label={label} />\n            )}\n            disabled={disabled}\n          />\n          {!disabled && (\n            <IconButton\n              color=\"primary\"\n              component=\"span\"\n              onClick={handleClickIcon}\n            >\n              <AddIcon />\n            </IconButton>\n          )}\n        </Stack>\n        <FormHelperText>{helperText}</FormHelperText>\n      </Stack>\n    </FormControl>\n  </>\n);\nexport default StaffSelectPresenter;\n","import { VFC, useEffect, useState } from 'react';\nimport ky from '@/lib/ky';\nimport StaffSelectPresenter from './StaffSelectPresenter';\nimport Staff from '../../../types/staff';\nimport { useAuthUser } from '../../../contexts/auth/AuthUserContext';\n\ntype Props = {\n  onChange?: (staff?: Staff) => void;\n  label?: string;\n  defaultStaffId?: number;\n  error?: boolean;\n  helperText?: string;\n  disabled?: boolean;\n};\n\ntype StaffResult = {\n  staffs: Staff[];\n};\n\nconst getStaffName = (staff: Staff): string => {\n  const { staffId, firstName, lastName } = staff;\n\n  return `${lastName} ${firstName} (ID:${staffId})`;\n};\n\nconst getStaffNameById = (staffs: Staff[], staffId?: number): string => {\n  if (!staffId) {\n    return '';\n  }\n\n  const targetStaff = staffs.find((s) => s.staffId === staffId);\n\n  if (targetStaff) {\n    return getStaffName(targetStaff);\n  }\n\n  return '';\n};\n\nconst StaffSelect: VFC<Props> = ({\n  defaultStaffId = 0,\n  label = '',\n  onChange,\n  error,\n  helperText,\n  disabled = false,\n}) => {\n  const [staffs, setStaffs] = useState<Staff[]>([]);\n  const [staffNames, setStaffNames] = useState<string[]>([]);\n  const auth = useAuthUser();\n\n  useEffect(() => {\n    const loadStaffs = async (): Promise<void> => {\n      try {\n        const staffsResult = await ky.get(`staffs`).json<StaffResult>();\n\n        setStaffs(staffsResult.staffs);\n        const staffNameList = staffsResult.staffs.map((s) => getStaffName(s));\n        setStaffNames(staffNameList);\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.log('error');\n      } finally {\n        // setIsLoading(false);\n      }\n    };\n\n    void loadStaffs();\n  }, []);\n\n  const staffName = getStaffNameById(staffs, defaultStaffId);\n\n  const handleClickIcon = () => {\n    if (auth) {\n      const targetStaff = staffs.find(\n        (s) => String(s.staffId) === auth.staffId,\n      );\n\n      if (targetStaff && onChange) {\n        onChange(targetStaff);\n      }\n    }\n  };\n\n  const handleOnChange = (input: string | null): void => {\n    const targetStaff = staffs.find((s) => input === getStaffName(s));\n    if (onChange) {\n      onChange(targetStaff);\n    }\n  };\n\n  return (\n    <StaffSelectPresenter\n      staffNames={staffNames}\n      handleClickIcon={handleClickIcon}\n      handleOnChange={handleOnChange}\n      staffName={staffName}\n      label={label}\n      error={error}\n      helperText={helperText}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default StaffSelect;\n","import { FC, useEffect, useState } from 'react';\nimport {\n  TextField,\n  Button,\n  Grid,\n  InputAdornment,\n  Dialog,\n  Autocomplete,\n  Stack,\n} from '@mui/material';\nimport { isAfter, isBefore } from 'date-fns';\nimport ky from '@/lib/ky';\nimport InjectionRouteNestList from '@/components/oraganisms/InjectionRouteNestList/InjectionRouteNestList';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\nimport Staff from '@/types/staff';\nimport StaffSelect from '@/components/oraganisms/StaffSelect/StaffSelect';\nimport { useAuthUser } from '@/contexts/auth/AuthUserContext';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\nimport { Comment } from '@/types/order/injection/injectionComment';\n\ntype Prop = {\n  defaultExecute: InjectionExecute;\n  onInput: (input: InjectionExecute, isEndFlg: boolean) => void;\n  executes: InjectionExecute[];\n  isShowRemainAmount: boolean;\n  totalAmount: number;\n  reserveDate: string;\n};\n\ntype Result = {\n  executeCommentItems: Comment[];\n  endCommentItems: Comment[];\n  routeNestDatas: TreeItem[];\n};\n\nconst DropExecuteItemInput: FC<Prop> = ({\n  defaultExecute,\n  onInput,\n  executes,\n  isShowRemainAmount,\n  totalAmount,\n  reserveDate,\n}) => {\n  const [dropRecordId, setDropRecordId] = useState(\n    defaultExecute.injectionExecutionId,\n  );\n  const auth = useAuthUser();\n\n  // 投与ルートネストリストダイアログ\n  const [openInjectionRouteDialog, setOpenInjectionRouteDialog] =\n    useState(false);\n\n  const injectionRouteNestListOpen = () => {\n    setOpenInjectionRouteDialog(!openInjectionRouteDialog);\n  };\n\n  const [injectionRouteId, setInjectionRouteId] = useState(\n    defaultExecute.injectionRouteMstId,\n  );\n\n  const [nestListDatas, setNestListDatas] = useState<TreeItem[]>([]);\n\n  // 投与ルート\n  const onClickInjectionRoute = () => {\n    injectionRouteNestListOpen();\n  };\n\n  const [injectionRouteName, setInjectionRouteName] = useState<\n    string | undefined\n  >(undefined);\n\n  const setInjectionRoute = (injectionRouteData: TreeItem): void => {\n    setInjectionRouteId(injectionRouteData.itemId);\n    setInjectionRouteName(injectionRouteData.value);\n    injectionRouteNestListOpen();\n  };\n\n  // 点滴速度\n  const [dropSpeed, setDropSpeed] = useState<number | undefined>(\n    defaultExecute.executionDropSpeed,\n  );\n\n  const onChangeDropSpeed = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setDropSpeed(\n      Number(event.target.value) < 0 ? 0 : Number(event.target.value),\n    );\n  };\n\n  // 実施開始日\n  const [startDate, setStartDate] = useState(defaultExecute.executionStartDate);\n\n  const setupStartStaffId = (): number => {\n    if (\n      defaultExecute.executionStartId !== undefined &&\n      defaultExecute.executionStartId !== 0\n    ) {\n      return defaultExecute.executionStartId;\n    }\n    if (auth) {\n      return Number(auth.staffId);\n    }\n\n    return 0;\n  };\n\n  // 実施開始者\n  const [startStaff, setStartStaff] = useState<Staff>();\n\n  // 実施終了日\n  const [endDate, setEndDate] = useState(defaultExecute.executionEndDate);\n\n  // 実施終了者\n  const [endStaff, setEndStaff] = useState<Staff>();\n\n  // 実施コメント\n\n  const [executeCommentId, setExecuteCommentId] = useState<number | undefined>(\n    defaultExecute.executionCommentId,\n  );\n\n  const [executeCommentValue, setExecuteCommentValue] = useState<\n    string | undefined\n  >(defaultExecute.executionFreeComment);\n\n  // 投与量\n  const [amount, setAmount] = useState<number | undefined>(\n    defaultExecute.executionAmount,\n  );\n\n  const onChangeAmount = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setAmount(Number(event.target.value));\n  };\n\n  // 残\n  const [remainAmount, setRemainAmount] = useState<number | undefined>(0);\n\n  const onChangeRemainAmount = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRemainAmount(Number(event.target.value));\n  };\n\n  // 終了コメント\n  const [endCommentId, setEndCommentId] = useState<number | undefined>(\n    defaultExecute.endCommentId,\n  );\n\n  const [endCommentValue, setEndCommentValue] = useState<string | undefined>(\n    defaultExecute.endFreeComment,\n  );\n\n  const [endCommentDatas, setEndCommentDatas] = useState<Comment[]>([]);\n\n  const [executeCommentDatas, setExecuteCommentDatas] = useState<Comment[]>([]);\n\n  // エラー状態管理用のstate\n\n  const [injectionRouteError, setInjectionRouteError] = useState(false);\n\n  const [injectionRouteErrorHelperText, setInjectionRouteErrorHelperText] =\n    useState('');\n\n  const [dropSpeedError, setDropSpeedError] = useState(false);\n\n  const [dropSpeedErrorHelperText, setDropSpeedErrorHelperText] = useState('');\n\n  const [startDateError, setStartDateError] = useState(false);\n\n  const [startDateErrorHelperText, setStartDateErrorHelperText] = useState('');\n\n  const [startStaffError, setStartStaffError] = useState(false);\n\n  const [startStaffErrorHelperText, setStartStaffErrorHelperText] =\n    useState('');\n\n  const [endStaffError, setEndStaffError] = useState(false);\n\n  const [endStaffErrorHelperText, setEndStaffErrorHelperText] = useState('');\n\n  const [amountError, setAmountError] = useState(false);\n\n  const [amountErrorHelperText, setAmountErrorHelperText] = useState('');\n\n  const [endDateError, setEndDateError] = useState(false);\n\n  const [endDateErrorHelperText, setEndDateErrorHelperText] = useState('');\n\n  const onClickDosagaCal = () => {\n    // 点滴速度、開始・終了日時、投与量の入力チェック\n\n    const isDropSpeedInputError: boolean =\n      dropSpeed === undefined || dropSpeed === 0;\n\n    setDropSpeedError(isDropSpeedInputError);\n    setDropSpeedErrorHelperText(\n      isDropSpeedInputError ? '点滴速度を入力してください。' : '',\n    );\n\n    const isStartDateInputError: boolean = startDate == null;\n\n    setStartDateError(isStartDateInputError);\n    setStartDateErrorHelperText(\n      isStartDateInputError ? '実施開始日時を指定してください。' : '',\n    );\n\n    const isEndDateInputError: boolean = endDate == null;\n\n    setEndDateError(isEndDateInputError);\n    setEndDateErrorHelperText(\n      isEndDateInputError ? '実施終了日時を指定してください。' : '',\n    );\n\n    const isEndDateFutureDateError =\n      startDate != null &&\n      endDate != null &&\n      isAfter(new Date(startDate), new Date(endDate));\n\n    if (endDate != null) {\n      setEndDateError(isEndDateFutureDateError);\n      setEndDateErrorHelperText(\n        isEndDateFutureDateError\n          ? '実施終了日時には実施開始日時以降を指定してください。'\n          : '',\n      );\n    }\n\n    if (\n      !isDropSpeedInputError &&\n      !isStartDateInputError &&\n      !isEndDateInputError &&\n      !isEndDateFutureDateError &&\n      typeof dropSpeed === 'number' &&\n      typeof startDate === 'string' &&\n      typeof endDate === 'string'\n    ) {\n      // 差分を秒で取得\n      const second: number =\n        new Date(startDate).getTime() === new Date(endDate).getTime()\n          ? 0\n          : (new Date(endDate).getTime() - new Date(startDate).getTime()) /\n            1000;\n\n      // 時間に変換\n      const mintes: number = second / 60;\n      const time: number = mintes / 60;\n\n      const resultAmount = dropSpeed * time;\n\n      setAmount(Number(resultAmount.toFixed(3)));\n    }\n  };\n\n  const isImiidateEnd = (): boolean =>\n    executes.length === 0 ||\n    (executes.length === 1 &&\n      executes.some((e) => e.injectionExecutionId === dropRecordId));\n\n  // 入力チェック\n  const inputCheck = (isEndAdd: boolean): boolean => {\n    // 追加済みの実施がある場合、追加するには前の実施が終了している必要あり\n    let lastRow: InjectionExecute = {};\n\n    let isNotFinishError: boolean;\n\n    if (executes.length > 0) {\n      let lastRowIndex = -1;\n      if (dropRecordId === 0) {\n        // 新規の場合は最終行を対象とする\n        lastRowIndex = executes.length - 1;\n      } else if (\n        executes.some((e) => e.injectionExecutionId === dropRecordId)\n      ) {\n        // 編集の場合は一つ前の行インデックスを取得(2行目以降)\n        lastRowIndex =\n          executes.findIndex((e) => e.injectionExecutionId === dropRecordId) -\n          1;\n      }\n\n      if (lastRowIndex >= 0) {\n        lastRow = executes[lastRowIndex];\n        if (!lastRow.executionEndDate) {\n          isNotFinishError = true;\n          setEndDateError(isNotFinishError);\n          setEndDateErrorHelperText('前の実施が終了されていません。');\n\n          return false;\n        }\n        isNotFinishError = false;\n        setEndDateError(isNotFinishError);\n        setEndDateErrorHelperText('');\n      }\n    }\n\n    const isInjectionRouteInputError = injectionRouteId === 0;\n\n    // 投与ルートの入力チェック\n    setInjectionRouteError(isInjectionRouteInputError);\n    setInjectionRouteErrorHelperText(\n      isInjectionRouteInputError ? '投与ルートを指定してください。' : '',\n    );\n\n    // 実施開始日入力チェック\n    let isStartDateError: boolean;\n    if (startDate == null) {\n      isStartDateError = true;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('実施開始日時を指定してください。');\n    } else if (\n      lastRow !== {} &&\n      typeof lastRow.executionEndDate === 'string' &&\n      isBefore(new Date(startDate), new Date(lastRow.executionEndDate))\n    ) {\n      isStartDateError = true;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('実施期間が重複しています。');\n    } else if (isAfter(new Date(startDate), new Date())) {\n      isStartDateError = true;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('実施開始日時に未来日は指定できません。');\n    } else {\n      isStartDateError = false;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('');\n    }\n\n    // 実施開始者入力チェック\n    const isStartStaffInputError = startStaff?.staffId === 0;\n    setStartStaffError(isStartStaffInputError);\n    setStartStaffErrorHelperText(\n      isStartStaffInputError ? '開始者を指定してください。' : '',\n    );\n\n    // 投与量入力チェック\n    const isAmountInputError = typeof amount === 'number' && amount > 9999.999;\n    setAmountError(isAmountInputError);\n    setAmountErrorHelperText(\n      isAmountInputError\n        ? '投与量は、整数4ケタ、小数3ケタ以内で入力してください。'\n        : '',\n    );\n\n    let isEndDateError: boolean;\n    let isEndStaffInputError: boolean;\n\n    if (isEndAdd) {\n      // -----------------------------------------------------------------\n      // 終了追加の場合\n      // -----------------------------------------------------------------\n      // ⇒ 簡易的な入力を許容するため、即終了(*)の場合は\n      // 終了日の必須チェックを無しとします。\n      // ※終了日が省略された場合、終了日＝開始日 として保存されます。\n      // この場合、速度行では、ワンショットと同じ形式で表示されます。\n      //\n      // (*) 即終了：施用が１つしかない状態で、終了追加された場合\n      // -----------------------------------------------------------------\n\n      if (endDate == null && !isImiidateEnd) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('実施終了日時を指定してください。');\n      } else if (\n        endDate != null &&\n        startDate != null &&\n        isAfter(new Date(startDate), new Date(endDate))\n      ) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText(\n          '実施終了日時には実施開始日時以降を指定してください。',\n        );\n      } else if (endDate != null && isAfter(new Date(endDate), new Date())) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('実施終了日時に未来日は指定できません。');\n      } else {\n        isEndDateError = false;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('');\n      }\n\n      isEndStaffInputError = endStaff?.staffId === 0 && !!isImiidateEnd;\n      setEndStaffError(isEndStaffInputError);\n      setEndStaffErrorHelperText(\n        isEndStaffInputError ? '実施終了者を指定してください。' : '',\n      );\n    } else {\n      // --------------------------------------------\n      // 追加の場合\n      // --------------------------------------------\n      // 実施終了日時・実施終了者の整合性チェック\n      if (endDate == null) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('実施終了日時を指定してください。');\n      } else if (\n        endDate != null &&\n        startDate != null &&\n        isAfter(new Date(startDate), new Date(endDate))\n      ) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText(\n          '実施終了日時には実施開始日時以降を指定してください。',\n        );\n      } else if (endDate != null && isAfter(new Date(endDate), new Date())) {\n        isEndDateError = true;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('実施終了日時に未来日は指定できません。');\n      } else {\n        isEndDateError = false;\n        setEndDateError(isEndDateError);\n        setEndDateErrorHelperText('');\n      }\n\n      isEndStaffInputError = endStaff?.staffId === 0;\n      setEndStaffError(isEndStaffInputError);\n      setEndStaffErrorHelperText(\n        isEndStaffInputError ? '実施終了者を指定してください。' : '',\n      );\n    }\n\n    const isError = (): boolean =>\n      isNotFinishError ||\n      isInjectionRouteInputError ||\n      isStartDateError ||\n      isStartStaffInputError ||\n      isAmountInputError ||\n      isEndDateError ||\n      isEndStaffInputError;\n\n    if (isError()) {\n      return false;\n    }\n\n    return true;\n  };\n\n  // 追加ボタンを押したときのアクション\n  const doAddButton = () => {\n    if (!inputCheck(false)) {\n      return;\n    }\n    const execute: InjectionExecute = {\n      injectionExecutionId: dropRecordId,\n      executionStartDate: startDate,\n      injectionRouteMstId: injectionRouteId,\n      executionStartId: startStaff?.staffId,\n      executionEndDate: endDate,\n      executionEndId: endStaff?.staffId,\n      executionCommentId: executeCommentId,\n      executionFreeComment: executeCommentValue,\n      endCommentId,\n      endFreeComment: endCommentValue,\n      executionAmount: amount,\n      executionDropSpeed: dropSpeed,\n    };\n    onInput(execute, false);\n  };\n\n  const doEndAddButton = () => {\n    if (!inputCheck(true)) {\n      return;\n    }\n    const execute: InjectionExecute = {\n      injectionExecutionId: dropRecordId,\n      executionStartDate: startDate,\n      injectionRouteMstId: injectionRouteId,\n      executionStartId: startStaff?.staffId,\n      executionEndDate: endDate,\n      executionEndId: endStaff?.staffId,\n      executionCommentId: executeCommentId,\n      executionFreeComment: executeCommentValue,\n      endCommentId,\n      endFreeComment: endCommentValue,\n      executionAmount: amount,\n      executionDropSpeed: dropSpeed,\n    };\n    onInput(execute, true);\n  };\n\n  useEffect(() => {\n    const load = async (): Promise<void> => {\n      try {\n        const result = await ky\n          .get('orders/injections/executes/drop', {\n            searchParams: {\n              reserveDate,\n            },\n          })\n          .json<Result>();\n\n        setExecuteCommentDatas(result.executeCommentItems);\n        setEndCommentDatas(result.endCommentItems);\n        setNestListDatas(result.routeNestDatas);\n      } catch (err) {\n        throw new Error('error');\n      }\n    };\n\n    void load();\n  }, [reserveDate]);\n\n  useEffect(() => {\n    setDropRecordId(defaultExecute.injectionExecutionId);\n    setInjectionRouteId(defaultExecute.injectionRouteMstId);\n    setInjectionRouteName(\n      nestListDatas.find((e) => e.itemId === defaultExecute.injectionRouteMstId)\n        ?.value,\n    );\n    setDropSpeed(defaultExecute.executionDropSpeed);\n    setStartDate(defaultExecute.executionStartDate);\n    setEndDate(defaultExecute.executionEndDate);\n    setExecuteCommentId(defaultExecute.executionCommentId);\n    setExecuteCommentValue(defaultExecute.executionFreeComment);\n    setAmount(defaultExecute.executionAmount);\n\n    let amountSum = 0;\n\n    executes.forEach((e) => {\n      if (e.executionAmount) {\n        amountSum += e.executionAmount;\n      }\n    });\n\n    const remain: number = totalAmount - amountSum;\n\n    setRemainAmount(remain >= 0 ? remain : 0);\n  }, [nestListDatas, totalAmount, defaultExecute, executes]);\n\n  return (\n    <>\n      <Stack\n        component=\"form\"\n        noValidate\n        spacing={3}\n        paddingLeft=\"18px\"\n        sx={{\n          flexGrow: 1,\n        }}\n      >\n        <Grid container spacing={2} direction=\"column\">\n          <Grid item>\n            <TextField\n              defaultValue=\" \"\n              error={injectionRouteError}\n              helperText={injectionRouteErrorHelperText}\n              id=\"injectionRouteTextField\"\n              label=\"投与ルート\"\n              variant=\"filled\"\n              value={injectionRouteName}\n              onClick={onClickInjectionRoute}\n              InputProps={{\n                readOnly: true,\n              }}\n            />\n            <Dialog\n              open={openInjectionRouteDialog}\n              onClose={injectionRouteNestListOpen}\n            >\n              <InjectionRouteNestList\n                nestListItemClickAction={setInjectionRoute}\n                listDatas={nestListDatas}\n              />\n            </Dialog>\n          </Grid>\n          <Grid item>\n            <TextField\n              error={dropSpeedError}\n              className=\"dropSpeed\"\n              id=\"dropSpeedTextField\"\n              label=\"点滴速度\"\n              variant=\"outlined\"\n              type=\"number\"\n              value={dropSpeed}\n              onChange={onChangeDropSpeed}\n              helperText={dropSpeedErrorHelperText}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">ml/時間</InputAdornment>\n                ),\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <TextField\n              label=\"実施開始日時\"\n              type=\"datetime-local\"\n              error={startDateError}\n              helperText={startDateErrorHelperText}\n              value={startDate}\n              sx={{ width: 250 }}\n              InputLabelProps={{\n                shrink: true,\n              }}\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                setStartDate(event.target.value);\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <StaffSelect\n              label=\"開始者\"\n              defaultStaffId={setupStartStaffId()}\n              error={startStaffError}\n              helperText={startStaffErrorHelperText}\n              onChange={(staff?: Staff) => {\n                if (staff !== undefined) {\n                  setStartStaff(staff);\n                }\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <TextField\n              label=\"実施終了日時\"\n              type=\"datetime-local\"\n              error={endDateError}\n              helperText={endDateErrorHelperText}\n              value={endDate}\n              sx={{ width: 250 }}\n              InputLabelProps={{\n                shrink: true,\n              }}\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                setEndDate(event.target.value);\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <StaffSelect\n              label=\"終了者\"\n              error={endStaffError}\n              helperText={endStaffErrorHelperText}\n              onChange={(staff?: Staff) => {\n                if (staff !== undefined) {\n                  setEndStaff(staff);\n                }\n              }}\n            />\n          </Grid>\n          <Grid item>\n            <TextField\n              className=\"amount\"\n              error={amountError}\n              helperText={amountErrorHelperText}\n              id=\"amountTextField\"\n              label=\"投与量\"\n              variant=\"outlined\"\n              type=\"number\"\n              value={amount}\n              onChange={onChangeAmount}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">ml</InputAdornment>\n                ),\n              }}\n            />\n            <Button variant=\"contained\" onClick={onClickDosagaCal}>\n              用量計算\n            </Button>\n          </Grid>\n          {isShowRemainAmount && (\n            <Grid item>\n              <TextField\n                className=\"remainAmount\"\n                id=\"remainAmountTextField\"\n                label=\"残量\"\n                variant=\"outlined\"\n                type=\"number\"\n                value={remainAmount}\n                onChange={onChangeRemainAmount}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">ml</InputAdornment>\n                  ),\n                  readOnly: true,\n                }}\n              />\n            </Grid>\n          )}\n          <Grid item>\n            <Autocomplete\n              freeSolo\n              onChange={(event, value) => {\n                if (typeof value === 'string') {\n                  setExecuteCommentId(Number(0));\n                  setExecuteCommentValue(value);\n                } else if (value != null) {\n                  setExecuteCommentId(Number(value?.executeCommentId));\n                  setExecuteCommentValue(value?.content);\n                }\n              }}\n              value={\n                executeCommentId !== 0\n                  ? executeCommentDatas.find(\n                      (e) => Number(e.executeCommentId) === executeCommentId,\n                    )\n                  : executeCommentValue\n              }\n              options={executeCommentDatas}\n              getOptionLabel={(option) =>\n                typeof option === 'string' ? option : option.content\n              }\n              renderInput={(params) => (\n                <TextField {...params} label=\"実施コメント\" />\n              )}\n            />\n          </Grid>\n          <Grid item>\n            <Autocomplete\n              freeSolo\n              onChange={(event, value) => {\n                if (typeof value === 'string') {\n                  setEndCommentId(Number(0));\n                  setEndCommentValue(value);\n                } else if (value != null) {\n                  setEndCommentId(Number(value?.executeCommentId));\n                  setEndCommentValue(value?.content);\n                }\n              }}\n              value={\n                endCommentId !== 0\n                  ? endCommentDatas.find(\n                      (e) => Number(e.executeCommentId) === endCommentId,\n                    )\n                  : endCommentValue\n              }\n              options={endCommentDatas}\n              getOptionLabel={(option) =>\n                typeof option === 'string' ? option : option.content\n              }\n              renderInput={(params) => (\n                <TextField {...params} label=\"終了コメント\" />\n              )}\n            />\n          </Grid>\n          <Grid item>\n            <Button variant=\"contained\" color=\"success\" onClick={doAddButton}>\n              追加\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"success\"\n              onClick={doEndAddButton}\n            >\n              終了追加\n            </Button>\n          </Grid>\n        </Grid>\n      </Stack>\n    </>\n  );\n};\n\nexport default DropExecuteItemInput;\n","import { FC, useState } from 'react';\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Grid,\n  IconButton,\n  Dialog,\n  Box,\n  Divider,\n} from '@mui/material/';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { format } from 'date-fns';\nimport DropExecuteItemInput from './DropExecuteItemInput';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\n\ntype Props = {\n  execute: InjectionExecute;\n  onClickDeleteButton: (value: InjectionExecute) => void;\n  executes: InjectionExecute[];\n  injectionOrder: InjectionOrder;\n  isLastRow: boolean;\n};\n\nconst DropExecuteItem: FC<Props> = ({\n  execute,\n  onClickDeleteButton,\n  executes,\n  isLastRow,\n  injectionOrder,\n}) => {\n  const [updateInputDialog, setUpdateInputDialog] = useState(false);\n\n  const [inputExecute, setInputExecute] = useState<InjectionExecute>(execute);\n\n  const openUpdateInputDialog = () => {\n    setUpdateInputDialog(!updateInputDialog);\n  };\n\n  const setInputDataValue = (value: InjectionExecute) => {\n    setInputExecute(value);\n    openUpdateInputDialog();\n  };\n\n  return (\n    <>\n      <Card sx={{ minWidth: 275 }}>\n        <CardContent>\n          <Typography sx={{ fontSize: 16 }}>\n            開始日時：\n            {inputExecute.executionStartDate !== undefined\n              ? format(\n                  new Date(inputExecute.executionStartDate),\n                  'yyyy/MM/dd HH:mm',\n                )\n              : ''}\n          </Typography>\n          <Typography sx={{ fontSize: 16 }}>\n            終了日時：\n            {inputExecute.executionEndDate !== undefined &&\n            inputExecute.executionEndDate !== null\n              ? format(\n                  new Date(inputExecute.executionEndDate),\n                  'yyyy/MM/dd HH:mm',\n                )\n              : ''}\n          </Typography>\n          <Typography sx={{ fontSize: 16 }}>\n            速度：{inputExecute.executionDropSpeed}\n          </Typography>\n          <Typography sx={{ fontSize: 16 }}>\n            投与量：{inputExecute.executionAmount}\n          </Typography>\n          <Typography sx={{ fontSize: 16 }}>\n            コメント：{inputExecute.executionFreeComment}\n          </Typography>\n        </CardContent>\n        {isLastRow && (\n          <Grid container>\n            <Grid item>\n              <IconButton\n                aria-label=\"delete\"\n                onClick={() => {\n                  onClickDeleteButton(execute);\n                }}\n              >\n                <DeleteIcon />\n              </IconButton>\n            </Grid>\n            <Grid item>\n              <IconButton aria-label=\"edit\" onClick={openUpdateInputDialog}>\n                <EditIcon />\n              </IconButton>\n              <Dialog open={updateInputDialog} onClose={openUpdateInputDialog}>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Grid container spacing={2}>\n                    <Grid item xs={4}>\n                      <IconButton onClick={openUpdateInputDialog}>\n                        <CloseIcon />\n                      </IconButton>\n                    </Grid>\n                    <Grid item xs={7}>\n                      <Typography sx={{ fontSize: 25 }}>\n                        点滴履歴編集\n                      </Typography>\n                    </Grid>\n                  </Grid>\n                </Box>\n                <Divider />\n                <DropExecuteItemInput\n                  defaultExecute={inputExecute}\n                  onInput={setInputDataValue}\n                  executes={executes}\n                  isShowRemainAmount={false}\n                  totalAmount={injectionOrder.totalAmount}\n                  reserveDate={injectionOrder.reserveDate}\n                />\n              </Dialog>\n            </Grid>\n          </Grid>\n        )}\n      </Card>\n    </>\n  );\n};\nexport default DropExecuteItem;\n","import { FC } from 'react';\nimport { List, ListItem } from '@mui/material/';\nimport DropExecuteItem from './DropExecuteItem';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\n\nconst style = {\n  width: '100%',\n  maxWidth: 380,\n  bgcolor: 'background.paper',\n};\n\ntype Props = {\n  dropItemList: InjectionExecute[];\n  deleteAction: (value: InjectionExecute) => void;\n  injectionOrder: InjectionOrder;\n};\n\nconst DropExecuteItemList: FC<Props> = ({\n  dropItemList,\n  deleteAction,\n  injectionOrder,\n}) => (\n  <>\n    <List sx={style} component=\"nav\">\n      {dropItemList.map((execute) => (\n        <ListItem>\n          <DropExecuteItem\n            execute={execute}\n            onClickDeleteButton={deleteAction}\n            executes={dropItemList}\n            isLastRow={\n              dropItemList[dropItemList.length - 1].injectionExecutionId ===\n              execute.injectionExecutionId\n            }\n            injectionOrder={injectionOrder}\n          />\n        </ListItem>\n      ))}\n    </List>\n  </>\n);\n\nexport default DropExecuteItemList;\n","export const getAge = (birthday: Date): number => {\n  const today = new Date();\n\n  const thisYearsBirthday = new Date(\n    today.getFullYear(),\n    birthday.getMonth() - 1,\n    birthday.getDate(),\n  );\n\n  let age = today.getFullYear() - birthday.getFullYear();\n\n  if (today < thisYearsBirthday) {\n    age -= 1;\n  }\n\n  return age;\n};\n\nexport default getAge;\n","import { VFC } from 'react';\nimport { format } from 'date-fns';\nimport {\n  Card,\n  CardContent,\n  CardActions,\n  CardHeader,\n  IconButton,\n  Typography,\n  CircularProgress,\n  Collapse,\n} from '@mui/material';\nimport { AccountCircle } from '@mui/icons-material';\nimport Patient from '../../../types/patient';\nimport { getAge } from '../../../utils/age';\n\ntype Props = {\n  patient?: Patient;\n  cardActions?: JSX.Element;\n  cardContent?: JSX.Element;\n  displayContent?: boolean;\n};\n\nconst PatientCardPresenter: VFC<Props> = ({\n  patient,\n  cardActions,\n  cardContent,\n  displayContent = false,\n}) => {\n  const birthDate = patient ? new Date(patient.birthday) : new Date();\n  const formatBirthDate = patient ? format(birthDate, 'yyyy/MM/dd') : '';\n  const age = patient ? `(${getAge(birthDate).toString()}歳)` : '';\n\n  return patient ? (\n    <>\n      <Card variant=\"outlined\">\n        <CardHeader\n          avatar={\n            <IconButton aria-label=\"account\">\n              <AccountCircle fontSize=\"large\" />\n            </IconButton>\n          }\n          title={\n            <>\n              <Typography variant=\"h5\" component=\"div\">\n                {`${patient.lastName} ${patient.firstName}`}\n              </Typography>\n              <Typography gutterBottom variant=\"body1\" component=\"div\">\n                {`ID:${patient.patientId}`}\n              </Typography>\n              <Typography gutterBottom variant=\"body1\" component=\"div\">\n                {`${formatBirthDate} ${age} ${patient.sex} ${patient.bloodType}型 ${patient.rhFactor}`}\n              </Typography>\n            </>\n          }\n        />\n        {cardActions && <CardActions>{cardActions}</CardActions>}\n        {cardContent && (\n          <Collapse in={displayContent} timeout=\"auto\" unmountOnExit>\n            <CardContent>{cardContent}</CardContent>\n          </Collapse>\n        )}\n      </Card>\n    </>\n  ) : (\n    <Card variant=\"outlined\">\n      <CardHeader\n        title={\n          <>\n            <CircularProgress sx={{ margin: 'auto' }} />\n          </>\n        }\n      />\n    </Card>\n  );\n};\n\nexport default PatientCardPresenter;\n","import { VFC, useEffect, useState } from 'react';\nimport ky from '@/lib/ky';\nimport PatientCardPresenter from './PatientCardPresenter';\nimport Patient from '../../../types/patient';\n\ntype Props = {\n  patientId: string;\n  cardActions?: JSX.Element;\n  cardContent?: JSX.Element;\n  displayContent?: boolean;\n};\n\nconst PatientCard: VFC<Props> = ({\n  patientId,\n  cardActions,\n  cardContent,\n  displayContent,\n}) => {\n  const [patient, setPatient] = useState<Patient | undefined>(undefined);\n\n  useEffect(() => {\n    const loadPatient = async (): Promise<void> => {\n      try {\n        const patientResult = await ky\n          .get(`patients/${patientId}`)\n          .json<Patient>();\n\n        setPatient(patientResult);\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.log('error');\n      } finally {\n        // setIsLoading(false);\n      }\n    };\n\n    void loadPatient();\n  }, [patientId]);\n\n  return (\n    <PatientCardPresenter\n      patient={patient}\n      cardActions={cardActions}\n      cardContent={cardContent}\n      displayContent={displayContent}\n    />\n  );\n};\n\nexport default PatientCard;\n","/* eslint-disable no-nested-ternary */\nimport { FC, useState } from 'react';\nimport { Button, Grid, Divider, Typography, CardContent } from '@mui/material';\n\nimport format from 'date-fns/format';\n\nimport DropExecuteItemList from '@/components/pages/InjectionExecute/Drop/DropExecuteItemList';\nimport PatientCard from '@/components/oraganisms/PatientCard/PatientCard';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\n\ntype DisplayType = 'summary' | 'status' | 'execute' | '';\n\ntype Props = {\n  patientId: string;\n  injectionOrder: InjectionOrder;\n  executes: InjectionExecute[];\n  // eslint-disable-next-line react/require-default-props\n  deleteExecuteItem?: (itemData: InjectionExecute) => void;\n};\n\nconst InjectionPatientCard: FC<Props> = ({\n  patientId,\n  injectionOrder,\n  executes,\n  deleteExecuteItem,\n}) => {\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [displayType, setDisplayType] = useState<DisplayType>('');\n\n  const handleExpandClick = (selectedDisplayType: DisplayType) => {\n    if (!displayType) {\n      setExpanded(!expanded);\n      setDisplayType(selectedDisplayType);\n\n      return;\n    }\n\n    if (displayType !== selectedDisplayType) {\n      setDisplayType(selectedDisplayType);\n\n      if (!expanded) {\n        setExpanded(!expanded);\n      }\n\n      return;\n    }\n\n    setExpanded(!expanded);\n  };\n\n  const cardActions: JSX.Element = (\n    <Grid container spacing={2}>\n      <Grid item xs={4}>\n        <Button size=\"small\" onClick={() => handleExpandClick('summary')}>\n          {expanded && displayType === 'summary' ? '閉じる' : 'オーダ内容'}\n        </Button>\n      </Grid>\n      <Grid item xs={4}>\n        <Button size=\"small\" onClick={() => handleExpandClick('status')}>\n          {expanded && displayType === 'status' ? '閉じる' : '受付内容'}\n        </Button>\n      </Grid>\n      {injectionOrder?.execType === 2 && (\n        <Grid item xs={4}>\n          <Button size=\"small\" onClick={() => handleExpandClick('execute')}>\n            {expanded && displayType === 'execute' ? '閉じる' : '実施内容'}\n          </Button>\n        </Grid>\n      )}\n    </Grid>\n  );\n\n  const plansDateText = () => {\n    if (injectionOrder?.plansDate != null) {\n      if (injectionOrder.plansDate.substring(11) === '99:99') {\n        return format(\n          new Date(injectionOrder?.plansDate.substring(0, 10)),\n          'yyyy/MM/dd 未定',\n        );\n      }\n\n      return format(new Date(injectionOrder?.plansDate), 'yyyy/MM/dd HH:mm');\n    }\n\n    return '';\n  };\n\n  const createStatusSummary = `\n  依頼医：${injectionOrder?.issueStaffName ?? ''}\n  依頼日時：${\n    injectionOrder?.issueDate != null\n      ? format(new Date(injectionOrder?.issueDate), 'yyyy/MM/dd HH:mm')\n      : ''\n  }\n  代理入力者：${injectionOrder?.departmentName ?? ''}\n  指示受者：${injectionOrder?.instructedName ?? ''}\n  指示受日時：${\n    injectionOrder?.instructedDate != null\n      ? format(new Date(injectionOrder?.instructedDate), 'yyyy/MM/dd HH:mm')\n      : ''\n  }\n  実施者：${injectionOrder?.completeName ?? ''}\n  実施日時：${\n    injectionOrder?.completeDate != null\n      ? format(new Date(injectionOrder?.completeDate), 'yyyy/MM/dd HH:mm')\n      : ''\n  }\n  オーダ状態：${injectionOrder?.orderStatusName ?? ''}\n  予定日時：${plansDateText()}`;\n\n  const createCardContent = (inputDisplayType: DisplayType) => {\n    if (inputDisplayType === 'summary') {\n      return injectionOrder?.summary\n        .split(/(\\n)/)\n        .filter((item) => /\\n/.exec(item) === null)\n        .map((item) => <Typography>{item}</Typography>);\n    }\n\n    if (inputDisplayType === 'status') {\n      return createStatusSummary\n        .split(/(\\n)/)\n        .filter((item) => /\\n/.exec(item) === null)\n        .map((item) => <Typography>{item}</Typography>);\n    }\n\n    if (inputDisplayType === 'execute') {\n      if (injectionOrder != null && deleteExecuteItem) {\n        return (\n          <DropExecuteItemList\n            dropItemList={executes}\n            deleteAction={deleteExecuteItem}\n            injectionOrder={injectionOrder}\n          />\n        );\n      }\n    }\n\n    return null;\n  };\n\n  const cardContent: JSX.Element = (\n    <>\n      <Divider />\n      <CardContent>{createCardContent(displayType)}</CardContent>\n    </>\n  );\n\n  return (\n    <PatientCard\n      patientId={patientId}\n      cardActions={cardActions}\n      cardContent={cardContent}\n      displayContent={expanded}\n    />\n  );\n};\n\nexport default InjectionPatientCard;\n","import React, { FC, useEffect, useState } from 'react';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport { Autocomplete } from '@mui/lab';\nimport {\n  Fab,\n  Dialog,\n  InputAdornment,\n  Backdrop,\n  Snackbar,\n  Alert,\n} from '@mui/material';\nimport { format, isAfter } from 'date-fns';\nimport NavigationIcon from '@mui/icons-material/Navigation';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate } from 'react-router';\nimport ky from '@/lib/ky';\nimport InjectionRouteNestList from '@/components/oraganisms/InjectionRouteNestList/InjectionRouteNestList';\nimport { TreeItem } from '@/types/components/nestList/treeItem';\nimport doExecution from '@/components/pages/InjectionExecute/injectionExecution';\nimport { InjectionExecutePatch } from '@/components/pages/InjectionExecute/injectionExecutePatch';\nimport Staff from '@/types/staff';\nimport StaffSelect from '@/components/oraganisms/StaffSelect/StaffSelect';\nimport { useAuthUser } from '@/contexts/auth/AuthUserContext';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\nimport InjectionPatientCard from '@/components/oraganisms/InjectionPatientCard/InjectionPatientCard';\nimport { Comment } from '@/types/order/injection/injectionComment';\n\ntype Result = {\n  executeCommentItems: Comment[];\n  routeNestDatas: TreeItem[];\n};\n\ntype Props = {\n  injectionOrder: InjectionOrder;\n};\n\nconst FabButton = styled(Fab)({\n  position: 'fixed',\n  right: 15,\n  bottom: 15,\n});\n\nconst OneShotExec: FC<Props> = ({ injectionOrder }) => {\n  const navigate = useNavigate();\n  const auth = useAuthUser();\n\n  const editable: boolean = injectionOrder?.orderStatus !== 4;\n\n  const [successBarOpen, setSuccessBarOpen] = useState<boolean>(false);\n  const [errorBarOpen, setErrorBarOpen] = useState<boolean>(false);\n\n  const [oneShotRecord, _] = useState<InjectionExecute>(\n    injectionOrder.execList.length !== 0\n      ? injectionOrder.execList[0]\n      : {\n          injectionExecutionId: 0,\n          executionStartId: 0,\n          executionStartDate: format(new Date(), \"yyyy-MM-dd'T'HH:mm\"),\n        },\n  );\n  // 実施コメント\n  const [executeCommentDatas, setExecuteCommentDatas] = useState<Comment[]>([]);\n\n  const [executeCommentId, setExecuteCommentId] = useState<number | undefined>(\n    undefined,\n  );\n\n  const [executeCommentValue, setExecuteCommentValue] = useState<\n    string | undefined\n  >();\n\n  // 投与ルートネストリストダイアログ\n  const [openInjectionRouteDialog, setOpenInjectionRouteDialog] =\n    useState(false);\n\n  const [nestListDatas, setNestListDatas] = useState<TreeItem[]>([]);\n\n  const injectionRouteNestListOpen = () => {\n    setOpenInjectionRouteDialog(!openInjectionRouteDialog);\n  };\n\n  const [injectionRouteId, setInjectionRouteId] = useState<number | undefined>(\n    undefined,\n  );\n\n  // 実施開始日\n  const [startDate, setStartDate] = useState<string | undefined>();\n\n  const [\n    injectionRouteNameTextFieldValue,\n    setInjectionRouteNameTextFieldValue,\n  ] = useState<string | undefined>(undefined);\n\n  // 投与ルート\n  const onClickInjectionRoute = () => {\n    injectionRouteNestListOpen();\n  };\n\n  const setInjectionRoute = (injectionRouteData: TreeItem): void => {\n    setInjectionRouteId(injectionRouteData.itemId);\n    setInjectionRouteNameTextFieldValue(injectionRouteData.value);\n    injectionRouteNestListOpen();\n  };\n\n  const setupStartStaffId = (): number => {\n    if (\n      oneShotRecord.executionStartId !== undefined &&\n      oneShotRecord.executionStartId !== 0\n    ) {\n      return oneShotRecord.executionStartId;\n    }\n    if (auth) {\n      return Number(auth.staffId);\n    }\n\n    return 0;\n  };\n\n  // 実施開始者\n  const [startStaffId, setStartStaffId] = useState<number>(setupStartStaffId());\n\n  // 投与量\n  const [amount, setAmount] = useState<number | undefined>(undefined);\n\n  const onChangeAmount = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setAmount(Number(event.target.value));\n  };\n\n  // エラー状態管理用のstate\n\n  const [injectionRouteError, setInjectionRouteError] = useState(false);\n\n  const [injectionRouteErrorHelperText, setInjectionRouteErrorHelperText] =\n    useState('');\n\n  const [startDateError, setStartDateError] = useState(false);\n\n  const [startDateErrorHelperText, setStartDateErrorHelperText] = useState('');\n\n  const [startStaffError, setStartStaffError] = useState(false);\n\n  const [startStaffErrorHelperText, setStartStaffErrorHelperText] =\n    useState('');\n\n  const [amountError, setAmountError] = useState(false);\n\n  const [amountErrorHelperText, setAmountErrorHelperText] = useState('');\n\n  // 入力チェック\n  const inputCheck = (): boolean => {\n    const isInjectionRouteInputError = injectionRouteId === 0;\n\n    // 投与ルートの入力チェック\n    setInjectionRouteError(isInjectionRouteInputError);\n    setInjectionRouteErrorHelperText(\n      isInjectionRouteInputError ? '投与ルートを指定してください。' : '',\n    );\n\n    // 実施開始日入力チェック\n    let isStartDateError: boolean;\n    if (startDate == null) {\n      isStartDateError = true;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('実施開始日時を指定してください。');\n    } else if (isAfter(new Date(startDate), new Date())) {\n      isStartDateError = true;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('実施開始日時に未来日は指定できません。');\n    } else {\n      isStartDateError = false;\n      setStartDateError(isStartDateError);\n      setStartDateErrorHelperText('');\n    }\n\n    // 実施開始者入力チェック\n    const isStartStaffInputError = startStaffId === 0;\n    setStartStaffError(isStartStaffInputError);\n    setStartStaffErrorHelperText(\n      isStartStaffInputError ? '開始者を指定してください。' : '',\n    );\n\n    const getDecimalLength = (decimalNumber: number): number => {\n      const splitValue = String(decimalNumber).split('.')[1];\n\n      return splitValue ? splitValue.length : 0;\n    };\n\n    const getNumberLength = (decimalNumber: number): number => {\n      const splitValue = String(decimalNumber).split('.')[0];\n\n      return splitValue ? splitValue.length : 0;\n    };\n\n    // 投与量入力チェック\n    const isAmountInputError =\n      typeof amount === 'number' &&\n      (getNumberLength(amount) > 4 || getDecimalLength(amount) > 3);\n    setAmountError(isAmountInputError);\n    setAmountErrorHelperText(\n      isAmountInputError\n        ? '投与量は、整数4ケタ、小数3ケタ以内で入力してください。'\n        : '',\n    );\n\n    const isError = (): boolean =>\n      isInjectionRouteInputError ||\n      isStartDateError ||\n      isStartStaffInputError ||\n      isAmountInputError;\n\n    if (isError()) {\n      return false;\n    }\n\n    return true;\n  };\n\n  useEffect(() => {\n    const load = async (): Promise<void> => {\n      try {\n        const result = await ky\n          .get('orders/injections/executes/oneshot', {\n            searchParams: {\n              reserveDate: injectionOrder.reserveDate,\n            },\n          })\n          .json<Result>();\n\n        setExecuteCommentDatas(result.executeCommentItems);\n        setNestListDatas(result.routeNestDatas);\n      } catch (err) {\n        throw new Error('error');\n      }\n    };\n\n    void load();\n  }, [injectionOrder.reserveDate]);\n\n  useEffect(() => {\n    setExecuteCommentId(oneShotRecord.executionCommentId);\n\n    const executeComment: string | undefined =\n      oneShotRecord.executionCommentId === 0\n        ? oneShotRecord.executionFreeComment\n        : executeCommentDatas.find(\n            (e) =>\n              Number(e.executeCommentId) === oneShotRecord.executionCommentId,\n          )?.content;\n\n    setExecuteCommentValue(executeComment);\n    setInjectionRouteId(injectionOrder?.injectionRouteId);\n    setInjectionRouteNameTextFieldValue(injectionOrder?.injectionRouteName);\n    setStartDate(oneShotRecord.executionStartDate);\n    setAmount(\n      injectionOrder?.orderStatus === 4\n        ? oneShotRecord.executionAmount\n        : injectionOrder?.totalAmount,\n    );\n  }, [executeCommentDatas, injectionOrder, oneShotRecord]);\n\n  const executeButtonAction = async () => {\n    if (injectionOrder?.orderStatus !== 4) {\n      if (!inputCheck()) {\n        return;\n      }\n    }\n\n    const execute: InjectionExecute = {\n      injectionRouteMstId: injectionRouteId,\n      executionStartDate: startDate,\n      executionStartId: startStaffId,\n      executionCommentId: executeCommentId,\n      executionFreeComment:\n        executeCommentId === 0 ? executeCommentValue : undefined,\n      executionAmount: amount,\n    };\n\n    const executeData: InjectionExecutePatch = {\n      orderHeaderId: injectionOrder?.orderHeaderId ?? 0,\n      version: injectionOrder?.version ?? 0,\n      updateId: auth ? Number(auth.staffId) : 0,\n      end: true,\n      execList: injectionOrder?.orderStatus !== 4 ? [execute] : [],\n    };\n\n    const result = await doExecution(executeData);\n\n    if (result) {\n      setSuccessBarOpen(true);\n    } else {\n      setErrorBarOpen(true);\n    }\n  };\n\n  return (\n    <>\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={successBarOpen}\n      />\n      <Snackbar\n        open={successBarOpen}\n        autoHideDuration={6000}\n        onClose={() => {\n          setSuccessBarOpen(false);\n          navigate(-1);\n        }}\n      >\n        <Alert\n          onClose={() => {\n            setSuccessBarOpen(false);\n            navigate(-1);\n          }}\n          severity=\"success\"\n          sx={{ width: '100%' }}\n        >\n          {injectionOrder?.orderStatus !== 4\n            ? '実施情報を登録しました。'\n            : '実施取消を行いました。'}\n        </Alert>\n      </Snackbar>\n\n      <Snackbar\n        open={errorBarOpen}\n        autoHideDuration={6000}\n        onClose={() => {\n          setErrorBarOpen(false);\n        }}\n      >\n        <Alert\n          onClose={() => {\n            setErrorBarOpen(false);\n          }}\n          severity=\"error\"\n          sx={{ width: '100%' }}\n        >\n          実施情報の更新に失敗しました。\n        </Alert>\n      </Snackbar>\n      <FabButton\n        variant=\"extended\"\n        color=\"primary\"\n        aria-label=\"add-button\"\n        onClick={executeButtonAction}\n      >\n        <NavigationIcon sx={{ mr: 1 }} />\n        {injectionOrder?.execList.length === 0 ? '確定' : '実施取消'}\n      </FabButton>\n\n      <InjectionPatientCard\n        patientId={injectionOrder.patientId}\n        injectionOrder={injectionOrder}\n        executes={injectionOrder.execList}\n      />\n\n      <Grid container spacing={2} direction=\"column\">\n        <Grid item>\n          <TextField\n            defaultValue=\" \"\n            disabled={!editable}\n            error={injectionRouteError}\n            helperText={injectionRouteErrorHelperText}\n            id=\"injectionRouteTextField\"\n            label=\"投与ルート\"\n            variant=\"filled\"\n            value={injectionRouteNameTextFieldValue}\n            onClick={onClickInjectionRoute}\n            InputProps={{\n              readOnly: true,\n            }}\n          />\n          <Dialog\n            open={openInjectionRouteDialog}\n            onClose={injectionRouteNestListOpen}\n          >\n            <InjectionRouteNestList\n              nestListItemClickAction={setInjectionRoute}\n              listDatas={nestListDatas}\n            />\n          </Dialog>\n        </Grid>\n        <Grid item>\n          <TextField\n            label=\"実施開始日時\"\n            type=\"datetime-local\"\n            error={startDateError}\n            disabled={!editable}\n            helperText={startDateErrorHelperText}\n            value={startDate}\n            sx={{ width: 250 }}\n            InputLabelProps={{\n              shrink: true,\n            }}\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n              setStartDate(event.target.value);\n            }}\n          />\n        </Grid>\n        <Grid item>\n          <StaffSelect\n            label=\"開始者\"\n            defaultStaffId={startStaffId}\n            error={startStaffError}\n            helperText={startStaffErrorHelperText}\n            onChange={(staff?: Staff) => {\n              if (staff === undefined) {\n                setStartStaffId(0);\n              } else {\n                setStartStaffId(staff.staffId);\n              }\n            }}\n          />\n        </Grid>\n        <Grid item>\n          <TextField\n            error={amountError}\n            helperText={amountErrorHelperText}\n            id=\"amountTextField\"\n            label=\"投与量\"\n            variant=\"outlined\"\n            type=\"number\"\n            disabled={!editable}\n            value={amount}\n            onChange={onChangeAmount}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">ml</InputAdornment>,\n            }}\n          />\n        </Grid>\n        <Grid item>\n          <Autocomplete\n            freeSolo\n            disabled={!editable}\n            onChange={(event, value) => {\n              if (typeof value === 'string') {\n                setExecuteCommentId(Number(0));\n                setExecuteCommentValue(value);\n              } else if (value != null) {\n                setExecuteCommentId(Number(value?.executeCommentId));\n                setExecuteCommentValue(value?.content);\n              }\n            }}\n            value={executeCommentValue}\n            options={executeCommentDatas}\n            getOptionLabel={(option) =>\n              typeof option === 'string' ? option : option.content\n            }\n            renderInput={(params) => (\n              <TextField {...params} label=\"実施コメント\" />\n            )}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default OneShotExec;\n","import { FC, useState } from 'react';\nimport { Alert, Backdrop, Fab, Grid, Snackbar } from '@mui/material';\nimport NavigationIcon from '@mui/icons-material/Navigation';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate } from 'react-router-dom';\nimport DropExecuteItemInput from '@/components/pages/InjectionExecute/Drop/DropExecuteItemInput';\nimport { useAuthUser } from '@/contexts/auth/AuthUserContext';\nimport { InjectionExecute } from '@/types/order/injection/injectionExecute';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\nimport { InjectionExecutePatch } from '@/components/pages/InjectionExecute/injectionExecutePatch';\nimport doExecution from '@/components/pages/InjectionExecute/injectionExecution';\nimport InjectionPatientCard from '@/components/oraganisms/InjectionPatientCard/InjectionPatientCard';\n\ntype Prop = {\n  injectionOrder: InjectionOrder;\n};\n\nconst FabButton = styled(Fab)({\n  position: 'fixed',\n  right: 15,\n  bottom: 15,\n});\n\nconst DropExecute: FC<Prop> = ({ injectionOrder }) => {\n  const navigate = useNavigate();\n  const auth = useAuthUser();\n  const [isEndFlg, setEndFlg] = useState(injectionOrder.orderStatus === 4);\n  const [executes, setExecutes] = useState<InjectionExecute[]>(\n    injectionOrder.execList,\n  );\n  const [successBarOpen, setSuccessBarOpen] = useState<boolean>(false);\n  const [errorBarOpen, setErrorBarOpen] = useState<boolean>(false);\n\n  // 入力画面の初期入力値\n  const inputData: InjectionExecute = {\n    injectionExecutionId: 0,\n    executionStartId: 0,\n    executionEndId: 0,\n    executionDropSpeed: 0,\n  };\n\n  // 点滴履歴一覧の追加処理\n  const inputDropRecord = (execute: InjectionExecute, endFlg: boolean) => {\n    setExecutes((e) => [...e, execute]);\n    setEndFlg(endFlg);\n  };\n\n  // 点滴履歴一覧の削除処理\n  const deleteDropRecord = (execute: InjectionExecute) => {\n    setExecutes((e) => e.filter((f) => f !== execute));\n    setEndFlg(false);\n  };\n\n  const executeButtonAction = async () => {\n    const execute: InjectionExecutePatch = {\n      orderHeaderId: injectionOrder?.orderHeaderId ?? 0,\n      version: injectionOrder?.version ?? 0,\n      updateId: auth ? Number(auth.staffId) : 0,\n      end: isEndFlg,\n      execList: injectionOrder?.orderStatus !== 4 ? executes : [],\n    };\n\n    const result = await doExecution(execute);\n\n    if (result) {\n      setSuccessBarOpen(true);\n    } else {\n      setErrorBarOpen(true);\n    }\n  };\n\n  return (\n    <>\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={successBarOpen}\n      />\n      <Snackbar\n        open={successBarOpen}\n        autoHideDuration={6000}\n        onClose={() => {\n          setSuccessBarOpen(false);\n          navigate(-1);\n        }}\n      >\n        <Alert\n          onClose={() => {\n            setSuccessBarOpen(false);\n            navigate(-1);\n          }}\n          severity=\"success\"\n          sx={{ width: '100%' }}\n        >\n          {injectionOrder?.orderStatus !== 4\n            ? '実施情報を登録しました。'\n            : '実施取消を行いました。'}\n        </Alert>\n      </Snackbar>\n\n      <Snackbar\n        open={errorBarOpen}\n        autoHideDuration={6000}\n        onClose={() => {\n          setErrorBarOpen(false);\n        }}\n      >\n        <Alert\n          onClose={() => {\n            setErrorBarOpen(false);\n          }}\n          severity=\"error\"\n          sx={{ width: '100%' }}\n        >\n          実施情報の更新に失敗しました。\n        </Alert>\n      </Snackbar>\n\n      <FabButton\n        variant=\"extended\"\n        color=\"primary\"\n        aria-label=\"add-button\"\n        onClick={executeButtonAction}\n      >\n        <NavigationIcon sx={{ mr: 1 }} />\n        {injectionOrder?.orderStatus !== 4 ? '確定' : '実施取消'}\n      </FabButton>\n\n      <Grid container spacing={2} direction=\"column\">\n        <Grid item>\n          <InjectionPatientCard\n            patientId={injectionOrder.patientId}\n            injectionOrder={injectionOrder}\n            executes={executes}\n            deleteExecuteItem={deleteDropRecord}\n          />\n        </Grid>\n        <Grid item />\n        <DropExecuteItemInput\n          defaultExecute={inputData}\n          onInput={inputDropRecord}\n          executes={executes}\n          totalAmount={injectionOrder.totalAmount}\n          isShowRemainAmount\n          reserveDate={injectionOrder.reserveDate}\n        />\n      </Grid>\n    </>\n  );\n};\n\nexport default DropExecute;\n","import { FC, useCallback, useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { isAfter } from 'date-fns';\nimport ky from '@/lib/ky';\n\nimport OneShotExec from './Oneshot/OneShotExec';\nimport DropExecute from './Drop/DropExecute';\nimport { InjectionOrder } from '@/types/order/injection/injectionOrder';\nimport ConfirmDialog from '@/components/molecules/ConfirmDialog/ConfirmDialog';\nimport { useAuthUser } from '@/contexts/auth/AuthUserContext';\n\nconst InjectionExecute: FC = () => {\n  const auth = useAuthUser();\n  const navigate = useNavigate();\n  const { patientId, orderHeaderId } = useParams();\n\n  const [injectionOrderData, setInjectionOrderData] =\n    useState<InjectionOrder>();\n\n  const [errorText, setErrorText] = useState<string | undefined>(undefined);\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n  const load = useCallback(async (): Promise<void> => {\n    try {\n      const result = await ky\n        .get('orders/injections', {\n          searchParams: {\n            orderHeaderId: Number(orderHeaderId),\n          },\n        })\n        .json<InjectionOrder>();\n\n      const checkOrder = (): boolean => {\n        if (result.orderHeaderId === 0) {\n          setErrorText('オーダを取得できません。');\n\n          return false;\n        }\n\n        if (result.patientId !== patientId) {\n          setErrorText('患者情報が一致しません。');\n\n          return false;\n        }\n\n        if (result.mainClass !== 'injection') {\n          setErrorText('注射オーダを取得できません。');\n\n          return false;\n        }\n\n        if (result.orderStatusName === '未受付') {\n          setErrorText('このオーダは受付されていません。');\n\n          return false;\n        }\n\n        if (result.orderStatus === 5) {\n          setErrorText('このオーダは中止されています。');\n\n          return false;\n        }\n\n        if (!result.executableFutureDay) {\n          const preferredDate = new Date(result.preferredDate);\n          if (isAfter(preferredDate, new Date())) {\n            setErrorText('未来日は実施できません。');\n\n            return false;\n          }\n        }\n\n        if (result.instructedStatus === 1) {\n          if (result.forcingInstracted) {\n            setDialogOpen(true);\n\n            return true; // ダイアログを表示するためtrueに\n          }\n          setErrorText('指示受けされていないため実施は行えません。');\n\n          return false;\n        }\n\n        return true;\n      };\n\n      setInjectionOrderData(checkOrder() ? result : undefined);\n    } catch (err) {\n      throw new Error('error');\n    }\n  }, [orderHeaderId, patientId]);\n\n  useEffect(() => {\n    void load();\n  }, [load]);\n\n  if (!injectionOrderData) {\n    return <p>{errorText}</p>;\n  }\n\n  const instructOrder = async (\n    injectionOrder: InjectionOrder,\n  ): Promise<void> => {\n    try {\n      const result = await ky\n        .put(`orders/injections`, {\n          json: {\n            orderHeaderId: injectionOrder.orderHeaderId,\n            userId: auth?.staffId,\n            patientId: injectionOrder.patientId,\n          },\n          timeout: false,\n        })\n        .json<InjectionOrder>();\n\n      setInjectionOrderData(result);\n    } catch {\n      // eslint-disable-next-line no-alert\n      alert('error');\n    }\n  };\n\n  return (\n    <>\n      <ConfirmDialog\n        dialogOpen={dialogOpen}\n        message={`指示受けされていません。\n        指示受けを行いますか？`}\n        onClickCancel={() => {\n          navigate(-1);\n        }}\n        onClickOK={async () => {\n          await instructOrder(injectionOrderData);\n        }}\n        onClose={() => {\n          setDialogOpen(false);\n        }}\n      />\n\n      {injectionOrderData.execType === 2 ? (\n        <DropExecute injectionOrder={injectionOrderData} />\n      ) : (\n        <OneShotExec injectionOrder={injectionOrderData} />\n      )}\n    </>\n  );\n};\n\nexport default InjectionExecute;\n","import { VFC, useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  IconButton,\n  Typography,\n  Divider,\n  Grid,\n} from '@mui/material';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport PatientCard from '../PatientCard/PatientCard';\nimport TransfusionExecute from './TransfusionPatientCardTypes';\n\ntype Props = {\n  patientId: string;\n  summary: string;\n  status: string;\n  executes: TransfusionExecute[];\n};\n\ntype DisplayType = 'summary' | 'status' | 'execute' | '';\n\nconst TransfusionPatientCardPresenter: VFC<Props> = ({\n  patientId,\n  summary,\n  status,\n  executes,\n}) => {\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [displayType, setDisplayType] = useState<DisplayType>('');\n\n  const handleExpandClick = (selectedDisplayType: DisplayType) => {\n    if (!displayType) {\n      setExpanded(!expanded);\n      setDisplayType(selectedDisplayType);\n\n      return;\n    }\n\n    if (displayType !== selectedDisplayType) {\n      setDisplayType(selectedDisplayType);\n\n      if (!expanded) {\n        setExpanded(!expanded);\n      }\n\n      return;\n    }\n\n    setExpanded(!expanded);\n  };\n\n  const createExecuteSummary = (\n    execute: TransfusionExecute,\n  ) => `製造番号：${execute.formulationNo}\n  使用日：${execute.executeDate}\n  実施者：${execute.executeStaffName}\n  実施区分：${execute.executeTypeName}\n  フィルタ：${execute.filterTypeName}\n  副作用：${execute.sideEffectNames}\n  `;\n\n  const createCardContent = (inputDisplayType: DisplayType) => {\n    if (inputDisplayType === 'summary') {\n      return summary\n        .split(/(\\n)/)\n        .filter((item) => /\\n/.exec(item) === null)\n        .map((item, index) => (\n          <Typography key={`summary-${String(index)}`}>{item}</Typography>\n        ));\n    }\n\n    if (inputDisplayType === 'status') {\n      return status\n        .split(/(\\n)/)\n        .filter((item) => /\\n/.exec(item) === null)\n        .map((item, index) => (\n          <Typography key={`status-${String(index)}`}>{item}</Typography>\n        ));\n    }\n\n    if (inputDisplayType === 'execute') {\n      return executes.map((item) => (\n        <Card variant=\"outlined\" key={item.formulationNo}>\n          <CardHeader\n            avatar={\n              item.isExecuteTarget ? (\n                <IconButton aria-label=\"execute\">\n                  <ArrowForwardIcon fontSize=\"medium\" />\n                </IconButton>\n              ) : (\n                <IconButton aria-label=\"execute\" sx={{ opacity: 0 }}>\n                  <ArrowForwardIcon fontSize=\"medium\" />\n                </IconButton>\n              )\n            }\n            title={\n              <>\n                <Typography\n                  variant=\"h5\"\n                  component=\"div\"\n                  key={item.formulationName}\n                >\n                  {item.formulationName}\n                </Typography>\n              </>\n            }\n          />\n          <CardContent>\n            {createExecuteSummary(item)\n              .split(/(\\n)/)\n              .filter((exec) => /\\n/.exec(exec) === null)\n              .map((exec, index) => (\n                <Typography key={`content-${String(index)}`}>{exec}</Typography>\n              ))}\n          </CardContent>\n        </Card>\n      ));\n    }\n\n    return null;\n  };\n\n  // cardActions\n  const cardActions: JSX.Element = (\n    <Grid container spacing={2}>\n      <Grid item xs={4}>\n        <Button size=\"small\" onClick={() => handleExpandClick('summary')}>\n          {expanded && displayType === 'summary' ? '閉じる' : 'オーダ内容'}\n        </Button>\n      </Grid>\n      <Grid item xs={4}>\n        <Button size=\"small\" onClick={() => handleExpandClick('status')}>\n          {expanded && displayType === 'status' ? '閉じる' : '受付内容'}\n        </Button>\n      </Grid>\n      <Grid item xs={4}>\n        <Button size=\"small\" onClick={() => handleExpandClick('execute')}>\n          {expanded && displayType === 'execute' ? '閉じる' : '実施内容'}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n\n  // cardContent\n  const cardContent: JSX.Element = (\n    <>\n      <Divider />\n      <CardContent>{createCardContent(displayType)}</CardContent>\n    </>\n  );\n\n  return (\n    <>\n      <PatientCard\n        patientId={patientId}\n        cardActions={cardActions}\n        cardContent={cardContent}\n        displayContent={expanded}\n      />\n    </>\n  );\n};\n\nexport default TransfusionPatientCardPresenter;\n","import { VFC } from 'react';\nimport TransfusionPatientCardPresenter from './TransfusionPatientCardPresenter';\nimport TransfusionExecute from './TransfusionPatientCardTypes';\n\ntype Props = {\n  patientId: string;\n  summary: string;\n  status: string;\n  executes: TransfusionExecute[];\n};\n\nconst TransfusionPatientCard: VFC<Props> = ({\n  patientId,\n  summary,\n  status,\n  executes,\n}) => (\n  <TransfusionPatientCardPresenter\n    patientId={patientId}\n    summary={summary}\n    status={status}\n    executes={executes}\n  />\n);\n\nexport default TransfusionPatientCard;\n","import OrderHeader from '../../../types/order/orderHeader';\n\nconst getStatusName = (orderStatus: number): string => {\n  if (orderStatus === 2) {\n    return '未実施';\n  }\n  if (orderStatus === 3) {\n    return '実施中';\n  }\n  if (orderStatus === 4) {\n    return '実施完了';\n  }\n\n  return '';\n};\n\nconst crateStatusSummary = (order: OrderHeader): string => {\n  const {\n    issueName,\n    deputeIssueName,\n    issueDate,\n    auditName,\n    auditDate,\n    orderStatus,\n  } = order;\n\n  const statusName = getStatusName(orderStatus);\n\n  return `依頼医：${issueName}\n    代理入力者：${deputeIssueName}\n    依頼日時：${issueDate}\n    実施者：${auditName}\n    実施日時：${auditDate}\n    オーダ状態：${statusName}\n    `.replaceAll('null', '');\n};\n\nexport default crateStatusSummary;\n","import { VFC } from 'react';\nimport {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n} from '@mui/material';\nimport TransfusionExecuteType from '../../../types/order/transfusion/transfusionExecuteType';\n\ntype Props = {\n  execTypeItems: TransfusionExecuteType[];\n  handleOnChange: (input: string | null) => void;\n  defaultExecuteType?: string;\n  label?: string;\n  error?: boolean;\n  helperText?: string;\n};\n\nconst TransfusionExecuteTypeSelectPresenter: VFC<Props> = ({\n  execTypeItems,\n  handleOnChange,\n  defaultExecuteType,\n  label = '',\n  error,\n  helperText,\n}) => (\n  <>\n    <FormControl error={error}>\n      <InputLabel id=\"exec-type-label\">{label}</InputLabel>\n      <Select\n        labelId=\"exec-type-label\"\n        id=\"exec-type\"\n        label=\"実施区分\"\n        value={defaultExecuteType}\n        // defaultValue={defaultExecuteType}\n        onChange={(event) => handleOnChange(event.target.value)}\n        sx={{ width: 250 }}\n      >\n        {execTypeItems.map((item) => (\n          <MenuItem value={item.value} key={item.value}>\n            {item.name}\n          </MenuItem>\n        ))}\n      </Select>\n      <FormHelperText>{helperText}</FormHelperText>\n    </FormControl>\n  </>\n);\nexport default TransfusionExecuteTypeSelectPresenter;\n","import { VFC, useEffect, useState } from 'react';\nimport ky from '@/lib/ky';\nimport TransfusionExecuteTypeSelectPresenter from './TransfusionExecuteTypeSelectPresenter';\nimport TransfusionExecuteType from '../../../types/order/transfusion/transfusionExecuteType';\n\ntype Props = {\n  onChange?: (exutecuteType?: TransfusionExecuteType) => void;\n  label?: string;\n  value?: number;\n  error?: boolean;\n  helperText?: string;\n  displayExecuteTypes?: ExecuteType[];\n};\n\ntype ExecuteType = 'DELIVERY' | 'EXECUTE' | 'RETURN' | '';\n\ntype TransfusionExecuteTypeResult = {\n  executeTypes: TransfusionExecuteType[];\n};\n\nconst TransfusionExecuteTypeSelect: VFC<Props> = ({\n  value,\n  label,\n  onChange,\n  error,\n  helperText,\n  displayExecuteTypes = ['DELIVERY', 'EXECUTE', 'RETURN'],\n}) => {\n  const [executeTypes, setExecuteTypes] = useState<TransfusionExecuteType[]>(\n    [],\n  );\n\n  useEffect(() => {\n    const loadStaffs = async (): Promise<void> => {\n      try {\n        const executeResult = await ky\n          .get(`orders/transfusions/executes/types`)\n          .json<TransfusionExecuteTypeResult>();\n\n        const filteredExecuteTypes = executeResult.executeTypes.filter(\n          (e) => displayExecuteTypes.findIndex((d) => d === e.type) > -1,\n        );\n        setExecuteTypes(filteredExecuteTypes);\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.log('error');\n      } finally {\n        // setIsLoading(false);\n      }\n    };\n\n    void loadStaffs();\n  }, [displayExecuteTypes]);\n\n  const handleOnChange = (input: string | null): void => {\n    const selected = executeTypes.find((type) => String(type.value) === input);\n\n    if (onChange) {\n      onChange(selected);\n    }\n  };\n\n  return (\n    <TransfusionExecuteTypeSelectPresenter\n      execTypeItems={executeTypes}\n      handleOnChange={handleOnChange}\n      defaultExecuteType={String(value)}\n      label={label}\n      error={error}\n      helperText={helperText}\n    />\n  );\n};\n\nexport default TransfusionExecuteTypeSelect;\n","import { VFC } from 'react';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport ListItemText from '@mui/material/ListItemText';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport Checkbox from '@mui/material/Checkbox';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n};\n\ntype NameValueItem = {\n  name: string;\n  value: string;\n};\n\ntype Props = {\n  items: NameValueItem[];\n  label?: string;\n  values?: string[];\n  onChange?: (values: NameValueItem[]) => void;\n};\n\nconst getSelectedNames = (items: NameValueItem[], selectedValues: string[]) =>\n  selectedValues\n    .map((selectedValue) => {\n      const selectedItem = items.find((item) => item.value === selectedValue);\n\n      if (selectedItem) {\n        return selectedItem;\n      }\n\n      return { name: '', value: 0 };\n    })\n    .filter((selectedNameValue) => selectedNameValue.value)\n    .map((selectedNameValue) => selectedNameValue.name);\n\nconst MultipleSelectPresenter: VFC<Props> = ({\n  items,\n  label,\n  values = [],\n  onChange,\n}) => {\n  const selectedNames = getSelectedNames(items, values);\n\n  const handleChange = (event: SelectChangeEvent<typeof values>) => {\n    const {\n      target: { value },\n    } = event;\n\n    const selectedValues =\n      typeof value === 'string' ? [value] : value.slice().sort();\n    if (onChange) {\n      const selectedNameValues = items.filter(\n        (item) => selectedValues.findIndex((v) => v === item.value) > -1,\n      );\n      onChange(selectedNameValues);\n    }\n  };\n\n  return (\n    <>\n      <FormControl sx={{ m: 1, width: 300 }}>\n        <InputLabel id=\"multiple-checkbox-label\">{label}</InputLabel>\n        <Select\n          labelId=\"multiple-checkbox-label\"\n          id=\"multiple-checkbox\"\n          multiple\n          value={values}\n          onChange={handleChange}\n          input={<OutlinedInput label=\"Tag\" />}\n          renderValue={(_) => selectedNames.join(', ')}\n          MenuProps={MenuProps}\n        >\n          {items.map((item) => (\n            <MenuItem key={item.name} value={item.value}>\n              <Checkbox\n                checked={values.findIndex((value) => value === item.value) > -1}\n              />\n              <ListItemText primary={item.name} />\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </>\n  );\n};\n\nexport default MultipleSelectPresenter;\n","import { VFC } from 'react';\nimport MultipleSelectPresenter from './MultipleSelectPresenter';\n\ntype NameValueItem = {\n  name: string;\n  value: string;\n};\n\ntype Props = {\n  items: NameValueItem[];\n  label?: string;\n  values?: string[];\n  onChange?: (values: NameValueItem[]) => void;\n};\n\nconst MultipleSelect: VFC<Props> = ({\n  items,\n  label = '',\n  values = [],\n  onChange,\n}) => (\n  <MultipleSelectPresenter\n    items={items}\n    label={label}\n    values={values}\n    onChange={onChange}\n  />\n);\n\nexport default MultipleSelect;\n","import { VFC } from 'react';\nimport MultipleSelect from '../../molecules/MultipleSelect/MultipleSelect';\n\ntype NameValueItem = {\n  name: string;\n  value: string;\n};\n\ntype Props = {\n  items: NameValueItem[];\n  label?: string;\n  sideEffectIds?: string[];\n  onChange?: (values: NameValueItem[]) => void;\n};\n\nconst SideEffectSelectPresenter: VFC<Props> = ({\n  items,\n  label,\n  sideEffectIds,\n  onChange,\n}) => (\n  <MultipleSelect\n    items={items}\n    label={label}\n    values={sideEffectIds}\n    onChange={onChange}\n  />\n);\n\nexport default SideEffectSelectPresenter;\n","import { VFC, useEffect, useState } from 'react';\nimport ky from '@/lib/ky';\nimport SideEffectSelectPresenter from './SideEffectSelectPresenter';\nimport TransfusionSideEffect from '@/types/order/transfusion/transfusionSideEffect';\n\ntype NameValueItem = {\n  name: string;\n  value: string;\n};\n\ntype Props = {\n  label?: string;\n  sideEffectIds?: number[];\n  onChange?: (values: TransfusionSideEffect[]) => void;\n};\n\ntype Result = {\n  sideEffects: TransfusionSideEffect[];\n};\n\nconst SideEffectSelect: VFC<Props> = ({\n  label = '',\n  sideEffectIds = [],\n  onChange,\n}) => {\n  const [sideEffects, setSideEffects] = useState<TransfusionSideEffect[]>([]);\n  const [sideEffectItems, setSideEffectItems] = useState<NameValueItem[]>([]);\n\n  useEffect(() => {\n    const loadStaffs = async (): Promise<void> => {\n      try {\n        const result = await ky\n          .get(`orders/transfusions/executes/side-effects`)\n          .json<Result>();\n\n        setSideEffects(result.sideEffects);\n        setSideEffectItems(\n          result.sideEffects.map((s) => {\n            const name = s.sideEffectName;\n            const value = String(s.sideEffectMstId);\n\n            return { name, value };\n          }),\n        );\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.log('error');\n      } finally {\n        // setIsLoading(false);\n      }\n    };\n\n    void loadStaffs();\n  }, []);\n\n  const handleOnChange = (items: NameValueItem[]) => {\n    const selectedSideEffects = sideEffects.filter(\n      (s) => items.findIndex((i) => Number(i.value) === s.sideEffectMstId) > -1,\n    );\n\n    if (onChange) {\n      void onChange(selectedSideEffects);\n    }\n  };\n\n  return (\n    <SideEffectSelectPresenter\n      items={sideEffectItems}\n      label={label}\n      sideEffectIds={sideEffectIds ? sideEffectIds.map((v) => String(v)) : []}\n      onChange={handleOnChange}\n    />\n  );\n};\n\nexport default SideEffectSelect;\n","import { useState, useCallback } from 'react';\n\ntype Disclosure = {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n};\n\nconst useDisclosure = (initial = false): Disclosure => {\n  const [isOpen, setIsOpen] = useState(initial);\n\n  const open = useCallback(() => setIsOpen(true), []);\n  const close = useCallback(() => setIsOpen(false), []);\n  const toggle = useCallback(() => setIsOpen((state) => !state), []);\n\n  return { isOpen, open, close, toggle };\n};\n\nexport default useDisclosure;\n","import { VFC, useState, useRef } from 'react';\nimport MenuItem from '@mui/material/MenuItem';\nimport {\n  Button,\n  ButtonGroup,\n  ClickAwayListener,\n  Grow,\n  MenuList,\n  Paper,\n  Popper,\n} from '@mui/material';\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport useDisclosure from '@/hooks/useDisclosure';\n\ntype Props = {\n  options: string[];\n  onClick: (index: number) => void;\n  defaultSelectedIndex?: number;\n  fixed?: boolean;\n  right?: number;\n  bottom?: number;\n};\n\nconst SplitButtonPresenter: VFC<Props> = ({\n  options,\n  onClick,\n  defaultSelectedIndex = 0,\n  fixed = false,\n  right = 0,\n  bottom = 0,\n}) => {\n  const { isOpen, toggle, close } = useDisclosure();\n  const anchorRef = useRef<HTMLDivElement>(null);\n  const [selectedIndex, setSelectedIndex] = useState(defaultSelectedIndex);\n\n  const sx = fixed\n    ? ({ position: 'fixed', right, bottom } as const)\n    : undefined;\n\n  const handleClick = () => {\n    onClick(selectedIndex);\n  };\n\n  const handleMenuItemClick = (\n    _: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    index: number,\n  ) => {\n    setSelectedIndex(index);\n    close();\n  };\n\n  const handleToggle = () => {\n    toggle();\n  };\n\n  const handleClose = (event: Event) => {\n    if (\n      anchorRef.current &&\n      anchorRef.current.contains(event.target as HTMLElement)\n    ) {\n      return;\n    }\n\n    close();\n  };\n\n  return (\n    <>\n      <ButtonGroup sx={sx} variant=\"contained\" ref={anchorRef}>\n        <Button size=\"large\" onClick={handleClick}>\n          {options[selectedIndex]}\n        </Button>\n        <Button size=\"small\" onClick={handleToggle}>\n          <ArrowDropDownIcon />\n        </Button>\n      </ButtonGroup>\n      <Popper\n        open={isOpen}\n        anchorEl={anchorRef.current}\n        transition\n        disablePortal\n      >\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === 'bottom' ? 'center top' : 'center bottom',\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={handleClose}>\n                <MenuList id=\"split-button-menu\">\n                  {options.map((option, index) => (\n                    <MenuItem\n                      key={option}\n                      selected={index === selectedIndex}\n                      onClick={(event) => handleMenuItemClick(event, index)}\n                    >\n                      {option}\n                    </MenuItem>\n                  ))}\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </>\n  );\n};\n\nexport default SplitButtonPresenter;\n","import { VFC } from 'react';\nimport SplitButtonPresenter from './SplitButtonPresenter';\n\ntype Props = {\n  options: string[];\n  onClick: (index: number) => void;\n  defaultSelectedIndex?: number;\n  fixed?: boolean;\n  right?: number;\n  bottom?: number;\n};\n\nconst SplitButton: VFC<Props> = ({\n  options,\n  onClick,\n  defaultSelectedIndex,\n  fixed,\n  right,\n  bottom,\n}) => (\n  <SplitButtonPresenter\n    options={options}\n    onClick={onClick}\n    defaultSelectedIndex={defaultSelectedIndex}\n    fixed={fixed}\n    right={right}\n    bottom={bottom}\n  />\n);\n\nexport default SplitButton;\n","import { VFC, useState } from 'react';\nimport {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n  Stack,\n  TextField,\n} from '@mui/material';\nimport { SubmitHandler, useForm, Controller } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { format } from 'date-fns';\nimport TransfusionPatientCard from '@/components/oraganisms/TransfusionPatientCard/TransfusionPatientCard';\nimport TransfusionOrder from '@/types/order/transfusion/transfusionOrder';\nimport crateStatusSummary from './orderStatusUtil';\nimport StaffSelect from '@/components/oraganisms/StaffSelect/StaffSelect';\nimport TransfusionDeliveryFormulation from '@/types/order/transfusion/transfusionDeliveryFormulation';\nimport TransfusionExecuteTypeSelect from '@/components/oraganisms/TransfusionExecuteTypeSelect/TransfusionExecuteTypeSelect';\nimport SideEffectSelect from '@/components/oraganisms/SideEffectSelect/SideEffectSelect';\nimport TransfusionExecute from '@/components/oraganisms/TransfusionPatientCard/TransfusionPatientCardTypes';\nimport SplitButton from '@/components/molecules/SplitButton/SplitButton';\n\ntype Props = {\n  transfusionOrder: TransfusionOrder;\n  deliveryFormulation: TransfusionDeliveryFormulation;\n  handleExecute: (input: TransfusionExecuteForm) => void;\n};\n\nexport type TransfusionExecuteForm = {\n  executeDate: string;\n  executeStaffId: number;\n  executeType: number;\n  filterType: number;\n  sideEffectIds: number[];\n};\n\nconst toTransfusionExecute = (\n  formulation: TransfusionDeliveryFormulation,\n  targetFormulationNo: string,\n  targetFormulationCode: string,\n): TransfusionExecute => {\n  const { formulationCode, formulationNo, formulationName } = formulation;\n  const isExecuteTarget =\n    formulationCode === targetFormulationCode &&\n    formulationNo === targetFormulationNo;\n\n  const { execute } = formulation;\n\n  if (!execute) {\n    return {\n      isExecuteTarget,\n      formulationName,\n      formulationNo,\n      executeDate: '',\n      executeStaffName: '',\n      executeTypeName: '',\n      filterTypeName: '',\n      sideEffectNames: '',\n    };\n  }\n\n  const {\n    executeDate,\n    executeStaffName,\n    executeTypeName,\n    filterTypeName,\n    sideEffects,\n  } = execute;\n\n  const sideEffectNames = sideEffects.map((s) => s.sideEffectName).join(',');\n\n  return {\n    isExecuteTarget,\n    formulationName,\n    formulationNo,\n    executeDate,\n    executeStaffName,\n    executeTypeName,\n    filterTypeName,\n    sideEffectNames,\n  };\n};\n\nconst schema = yup.object({\n  executeDate: yup.string().required('実施日時を入力してください。'),\n  executeStaffId: yup.number().required('実施者を入力してください。'),\n  executeType: yup.string().required('実施区分を入力してください。'),\n  filterType: yup.string().required('フィルタ区分を入力してください。'),\n});\n\nconst TranfusionExecutePresenter: VFC<Props> = ({\n  transfusionOrder,\n  deliveryFormulation,\n  handleExecute,\n}) => {\n  const { formulationName, formulationNo, formulationCode } =\n    deliveryFormulation;\n\n  const [_, __] = useState<number>(0);\n\n  const status = crateStatusSummary(transfusionOrder);\n\n  const { deliveryFormulations } = transfusionOrder.content;\n  const executes = deliveryFormulations.map((f) =>\n    toTransfusionExecute(f, formulationNo, formulationCode),\n  );\n\n  const targetExecute = deliveryFormulation.execute;\n\n  const {\n    register,\n    handleSubmit,\n    control,\n    formState: { errors },\n  } = useForm<TransfusionExecuteForm>({\n    resolver: yupResolver(schema),\n    defaultValues: {\n      executeDate: targetExecute ? targetExecute.executeDate : '',\n      executeStaffId: targetExecute ? targetExecute.executeStaffId : 0,\n      executeType: targetExecute ? targetExecute.executeType : 1,\n      filterType: targetExecute ? targetExecute.filterType : 1,\n      sideEffectIds: targetExecute\n        ? targetExecute.sideEffects.map((s) => s.sideEffectMstId)\n        : [],\n    },\n  });\n\n  const onSubmit: SubmitHandler<TransfusionExecuteForm> = (inputForm) => {\n    const {\n      executeDate,\n      executeStaffId,\n      executeType,\n      filterType,\n      sideEffectIds,\n    } = inputForm;\n\n    console.log('asdf123');\n    // if (inputForm) {\n    //   console.log('return');\n    //   alert('OK');\n\n    //   return;\n    // }\n\n    const input: TransfusionExecuteForm = {\n      executeDate,\n      executeStaffId,\n      executeType,\n      filterType,\n      sideEffectIds,\n    };\n\n    void handleExecute(input);\n  };\n\n  return (\n    <>\n      <Stack\n        component=\"form\"\n        noValidate\n        spacing={3}\n        paddingTop=\"25px\"\n        sx={{\n          flexGrow: 1,\n        }}\n      >\n        <TransfusionPatientCard\n          patientId={transfusionOrder.patientId}\n          summary={transfusionOrder.summary}\n          status={status}\n          executes={executes}\n        />\n        <TextField\n          disabled\n          id=\"formuration-name\"\n          label=\"製剤名\"\n          variant=\"filled\"\n          defaultValue={formulationName}\n          InputProps={{\n            readOnly: true,\n          }}\n        />\n        <TextField\n          disabled\n          id=\"formuration-number\"\n          label=\"製剤番号\"\n          variant=\"filled\"\n          defaultValue={formulationNo}\n          InputProps={{\n            readOnly: true,\n          }}\n        />\n        <TextField\n          id=\"exec-date\"\n          label=\"使用日時\"\n          type=\"datetime-local\"\n          defaultValue={format(new Date(), \"yyyy-MM-dd'T'HH:mm\")}\n          sx={{ width: 250 }}\n          InputLabelProps={{\n            shrink: true,\n          }}\n          error={'executeDate' in errors}\n          helperText={errors.executeDate?.message}\n          {...register('executeDate')}\n        />\n        <Controller\n          control={control}\n          name=\"executeStaffId\"\n          render={({ field: { onChange, value } }) => (\n            <StaffSelect\n              label=\"実施者\"\n              defaultStaffId={value}\n              onChange={(s) => onChange(s?.staffId)}\n              error={'executeStaffId' in errors}\n              helperText={errors.executeStaffId?.message}\n            />\n          )}\n        />\n        <Controller\n          control={control}\n          name=\"executeType\"\n          render={({ field: { onChange, value } }) => (\n            <TransfusionExecuteTypeSelect\n              label=\"実施区分\"\n              displayExecuteTypes={['EXECUTE', 'RETURN']}\n              onChange={(input) => onChange(input?.value)}\n              value={value}\n              error={'executeType' in errors}\n              helperText={errors.executeType?.message}\n            />\n          )}\n        />\n        <FormControl error={'filterType' in errors}>\n          <InputLabel id=\"filter-use-flg-label\">フィルタ</InputLabel>\n          <Select\n            labelId=\"filter-use-flg-label\"\n            id=\"filter-use-flg\"\n            label=\"フィルタ\"\n            defaultValue={1}\n            sx={{ width: 250 }}\n            {...register('filterType')}\n          >\n            <MenuItem value={1}>使用</MenuItem>\n            <MenuItem value={2}>未使用</MenuItem>\n          </Select>\n          <FormHelperText>{errors.filterType?.message}</FormHelperText>\n        </FormControl>\n        <Controller\n          control={control}\n          name=\"sideEffectIds\"\n          render={({ field: { value, onChange } }) => (\n            <SideEffectSelect\n              label=\"副作用\"\n              sideEffectIds={value}\n              onChange={(sideEffects) => {\n                onChange(sideEffects.map((s) => s.sideEffectMstId));\n              }}\n            />\n          )}\n        />\n\n        <SplitButton\n          options={['実施入力', '実施入力してオーダ完了']}\n          fixed\n          right={15}\n          bottom={15}\n          onClick={(index) => {\n            console.log(index);\n            // setSubmitType(index);\n            handleSubmit(onSubmit);\n          }}\n        />\n      </Stack>\n    </>\n  );\n};\n\nexport default TranfusionExecutePresenter;\n","import { VFC, useEffect, useState } from 'react';\nimport { Box, CircularProgress, Stack, Typography } from '@mui/material';\nimport BlockIcon from '@mui/icons-material/Block';\nimport { red } from '@mui/material/colors';\nimport ky from '@/lib/ky';\nimport TransfusionOrder from '../../../types/order/transfusion/transfusionOrder';\nimport TranfusionExecutePresenter, {\n  TransfusionExecuteForm,\n} from './TransfusionExecutePresenter';\nimport TransfusionDeliveryFormulation from '../../../types/order/transfusion/transfusionDeliveryFormulation';\n\ntype TransfusionResult = {\n  transfusionOrder?: TransfusionOrder;\n};\n\ntype TransfusionPatchRequest = {\n  orderHeaderId: number;\n  orderStatus: number;\n  version: number;\n  updateStaffId: number;\n  execute: TransfusionExecutePatchRequest;\n};\n\ntype TransfusionExecutePatchRequest = {\n  formulationCode: string;\n  formulationNo: string;\n  executeDate: string;\n  executeStaffId: number;\n  executeType: number;\n  filterType: number;\n  sideEffectIds: number[];\n};\n\ntype TransfusionExecutePatchResponse = {\n  result: string;\n};\n\ntype Props = {\n  patientId?: string;\n  formulationCode?: string;\n  formulationNo?: string;\n};\n\nconst TranfusionExecute: VFC<Props> = ({\n  patientId = '2730',\n  formulationCode = '0393012',\n  formulationNo = '123456',\n}) => {\n  const [order, setOrder] = useState<TransfusionOrder | undefined>(undefined);\n  const [deliveryFormulation, setDeliveryFormulation] = useState<\n    TransfusionDeliveryFormulation | undefined\n  >(undefined);\n  const [isLoading, setLoading] = useState<boolean>(false);\n\n  useEffect(() => {\n    const load = async (): Promise<void> => {\n      setLoading(true);\n      try {\n        const transfusionResult = await ky\n          .get(`orders/transfusions`, {\n            searchParams: {\n              patientId,\n              formulationCode,\n              formulationNo,\n            },\n          })\n          .json<TransfusionResult>();\n\n        setOrder(transfusionResult.transfusionOrder);\n\n        if (transfusionResult.transfusionOrder) {\n          const formurations =\n            transfusionResult.transfusionOrder.content.deliveryFormulations;\n          const targetFormulation = formurations.find(\n            (v) =>\n              v.formulationCode === formulationCode &&\n              v.formulationNo === formulationNo,\n          );\n\n          setDeliveryFormulation(targetFormulation);\n        }\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.log('error');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    void load();\n  }, [patientId, formulationCode, formulationNo]);\n\n  // 保存処理\n  const handleExecute = async (input: TransfusionExecuteForm) => {\n    if (!order) {\n      return;\n    }\n\n    const { orderHeaderId, orderStatus, version } = order;\n    const {\n      executeDate,\n      executeStaffId,\n      executeType,\n      filterType,\n      sideEffectIds,\n    } = input;\n\n    const transfusionOrderPatch: TransfusionPatchRequest = {\n      orderHeaderId,\n      version,\n      orderStatus,\n      updateStaffId: 10008,\n      execute: {\n        formulationCode,\n        formulationNo,\n        executeDate,\n        executeStaffId,\n        executeType,\n        filterType,\n        sideEffectIds,\n      },\n    };\n\n    try {\n      await ky\n        .patch(`orders/transfusions`, {\n          json: transfusionOrderPatch,\n          timeout: false,\n        })\n        .json<TransfusionExecutePatchResponse>();\n    } catch {\n      // eslint-disable-next-line no-alert\n      alert('error');\n    } finally {\n      // eslint-disable-next-line no-alert\n      alert('finally');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (!order || !deliveryFormulation) {\n    return (\n      <Stack\n        component=\"form\"\n        noValidate\n        spacing={0}\n        paddingTop=\"25px\"\n        sx={{\n          flexGrow: 1,\n        }}\n      >\n        <Box sx={{ display: 'flex' }}>\n          <BlockIcon sx={{ color: red[500] }} />\n          <Typography>オーダが取得できませんでした。</Typography>\n        </Box>\n        <Typography>患者ID：{patientId}</Typography>\n        <Typography>製剤コード：{formulationCode}</Typography>\n        <Typography>製剤番号：{formulationNo}</Typography>\n      </Stack>\n    );\n  }\n\n  return (\n    <TranfusionExecutePresenter\n      transfusionOrder={order}\n      deliveryFormulation={deliveryFormulation}\n      handleExecute={handleExecute}\n    />\n  );\n};\n\nexport default TranfusionExecute;\n","import { AccountCircle } from '@mui/icons-material';\nimport { Box, Grid, InputAdornment, TextField } from '@mui/material';\nimport { VFC } from 'react';\nimport AlertDialog from '../../molecules/ErrorDialog/AlertDialog';\nimport BarcodeReader from '../../oraganisms/BarcodeReader/BarcodeReader';\n\ntype Props = {\n  patientId: string;\n  formurationCode: string;\n  formurationNumber: string;\n  dialogOpen: boolean;\n  onScan: (code: string) => void;\n  setDialogOpen: (dialogOpen: boolean) => void;\n  transit: () => void;\n};\n\nconst TransfusionCheckPresenter: VFC<Props> = ({\n  patientId,\n  formurationCode,\n  formurationNumber,\n  dialogOpen,\n  onScan,\n  setDialogOpen,\n  transit,\n}) => (\n  <>\n    <AlertDialog\n      alertOpen={dialogOpen}\n      message={`患者ID：${patientId}\n      製剤コード：${formurationCode}\n      製剤番号：${formurationNumber}`}\n      toggleAlert={() => {\n        setDialogOpen(false);\n      }}\n      onEmpty={() => {\n        setDialogOpen(false);\n        transit();\n      }}\n    />\n    <Box\n      paddingTop=\"25px\"\n      sx={{\n        flexGrow: 1,\n      }}\n    >\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <TextField\n            id=\"patient-id\"\n            label=\"患者ID\"\n            color=\"success\"\n            value={patientId}\n            focused={!!patientId}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <AccountCircle />\n                </InputAdornment>\n              ),\n            }}\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <TextField\n            id=\"formuration-code\"\n            label=\"製剤コード\"\n            color=\"success\"\n            value={formurationCode}\n            focused={!!formurationCode}\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <TextField\n            id=\"formuration-number\"\n            label=\"製剤番号\"\n            color=\"success\"\n            value={formurationNumber}\n            focused={!!formurationNumber}\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <BarcodeReader onScan={onScan} />\n        </Grid>\n      </Grid>\n    </Box>\n  </>\n);\n\nexport default TransfusionCheckPresenter;\n","import { VFC, useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport TransfusionCheckPresenter from './TransfusionCheckPresenter';\n\nconst TransfusionCheck: VFC = () => {\n  const [patientId, setPatientId] = useState<string>('');\n  const [formurationCode, setFormurationCode] = useState<string>('');\n  const [formurationNumber, setFormurationNumber] = useState<string>('');\n  const [inputCode, setInputCode] = useState<string>('');\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n\n  const navigate = useNavigate();\n\n  const onScan = (code: string) => {\n    setInputCode(code);\n  };\n\n  useEffect(() => {\n    if (!patientId) {\n      setPatientId(inputCode);\n    } else if (!formurationCode) {\n      setFormurationCode(inputCode);\n    } else if (!formurationNumber) {\n      setFormurationNumber(inputCode);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputCode]);\n\n  useEffect(() => {\n    if (patientId && formurationCode && formurationNumber) {\n      // alert(\n      //   `patientId:${patientId}, formurationCode:${formurationCode}, formurationNumber:${formurationNumber}`,\n      // );\n      setDialogOpen(true);\n    }\n  }, [formurationCode, formurationNumber, patientId]);\n\n  return (\n    <TransfusionCheckPresenter\n      patientId={patientId}\n      formurationCode={formurationCode}\n      formurationNumber={formurationNumber}\n      dialogOpen={dialogOpen}\n      onScan={onScan}\n      setDialogOpen={setDialogOpen}\n      transit={() => navigate('/transfusion')}\n    />\n  );\n};\n\nexport default TransfusionCheck;\n","import { FC } from 'react';\nimport { Button, Container, Typography } from '@mui/material';\nimport { ErrorBoundary, FallbackProps } from 'react-error-boundary';\nimport AuthUserProvider from '@/contexts/auth/AuthUserContext';\n\nconst ErrorFallback: FC<FallbackProps> = ({ error: { message } }) => (\n  <Container>\n    <Typography variant=\"h4\" gutterBottom component=\"div\">\n      エラーが発生しました。\n    </Typography>\n    <Typography variant=\"h5\" gutterBottom component=\"div\">\n      {message}\n    </Typography>\n    <Button\n      variant=\"contained\"\n      onClick={() => window.location.assign(window.location.origin)}\n    >\n      メニューに戻る\n    </Button>\n  </Container>\n);\n\ntype AppProviderProps = {\n  children: React.ReactNode;\n};\n\nconst AppProvider: FC<AppProviderProps> = ({ children }) => (\n  <ErrorBoundary FallbackComponent={ErrorFallback}>\n    <AuthUserProvider>{children}</AuthUserProvider>\n  </ErrorBoundary>\n);\n\nexport default AppProvider;\n","import { VFC } from 'react';\nimport {\n  AppBar,\n  Box,\n  Grid,\n  IconButton,\n  Toolbar,\n  Typography,\n} from '@mui/material';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { useAuthUser } from '../../../contexts/auth/AuthUserContext';\n\ntype Props = {\n  onDrawerToggle: () => void;\n};\n\nconst Header: VFC<Props> = ({ onDrawerToggle }) => {\n  const auth = useAuthUser();\n\n  return (\n    <>\n      <Box sx={{ flexGrow: 1 }}>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Grid container spacing={1} alignItems=\"center\">\n              <Grid sx={{ display: { sm: 'none', xs: 'block' } }} item>\n                <IconButton\n                  size=\"large\"\n                  edge=\"start\"\n                  color=\"inherit\"\n                  aria-label=\"menu\"\n                  sx={{ mr: 2 }}\n                  onClick={onDrawerToggle}\n                >\n                  <MenuIcon />\n                </IconButton>\n              </Grid>\n              <Grid item>\n                <Typography>メインメニュー</Typography>\n              </Grid>\n              <Grid item xs />\n              <Grid item>\n                <Typography>{auth ? `${auth.staffName}` : ''}</Typography>\n              </Grid>\n            </Grid>\n          </Toolbar>\n        </AppBar>\n      </Box>\n    </>\n  );\n};\n\nexport default Header;\n","import { VFC } from 'react';\nimport { Navigate, Route, Routes, Outlet } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\nimport Login from './components/pages/Login/Login';\nimport MainMenu from './components/pages/MainMenu/MainMenu';\nimport InjectionCheck from './components/pages/InjectionCheck/InjectionCheck';\nimport InjectionExecute from './components/pages/InjectionExecute/InjectionExecute';\nimport { useAuthUser } from './contexts/auth/AuthUserContext';\nimport BarcodeReader from './components/oraganisms/BarcodeReader/BarcodeReader';\nimport TranfusionExecute from './components/pages/TransfusionExecute/TransfusionExecute';\nimport TransfusionCheck from './components/pages/TransfusionCheck/TransfusionCheck';\nimport AppProvider from './contexts/AppProvider';\nimport Header from './components/oraganisms/Header/Header';\nimport SideBar from './components/oraganisms/SideBar/SideBar';\nimport useDisclosure from './hooks/useDisclosure';\n\n/**\n * ログイン済みユーザーしかアクセスできなくする Outlet\n * @returns ログイン済み:<Outlet />, 未ログイン:/login に遷移\n */\nconst PrivateOutlet = () => {\n  const authUser = useAuthUser();\n  const isAuthenticated = authUser != null;\n\n  const { isOpen, open, toggle } = useDisclosure();\n\n  return isAuthenticated ? (\n    <>\n      <Header onDrawerToggle={toggle} />\n      <SideBar drawerOpen={isOpen} toggleDrawer={toggle} onOpen={open} />\n      <Outlet />\n    </>\n  ) : (\n    <Navigate to=\"/login\" />\n  );\n};\n\n/**\n * 未ログインユーザーしかアクセスできなくする Outlet\n * @returns ログイン済み:/main に遷移, 未ログイン:<Outlet />\n */\nconst UnAuthOutlet = () => {\n  const auth = useAuthUser();\n  const isAuthenticated = auth?.loggedIn;\n\n  return isAuthenticated ? <Navigate to=\"/main\" /> : <Login />;\n};\n\nconst App: VFC = () => (\n  <AppProvider>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Routes>\n        <Route path=\"/\" element={<PrivateOutlet />}>\n          <Route path=\"/\" element={<InjectionCheck />} />\n          <Route path=\"/barcode\" element={<BarcodeReader />} />\n          <Route path=\"/main\" element={<MainMenu />} />\n          <Route path=\"/injectionexecutedrop\" element={<InjectionExecute />} />\n          <Route\n            path=\"/injectionexecute/:patientId/:orderHeaderId\"\n            element={<InjectionExecute />}\n          />\n          <Route path=\"/transfusioncheck\" element={<TransfusionCheck />} />\n          <Route path=\"/transfusion\" element={<TranfusionExecute />} />\n        </Route>\n        <Route path=\"/login\" element={<UnAuthOutlet />}>\n          <Route path=\"/login\" element={<Login />} />\n        </Route>\n      </Routes>\n    </BrowserRouter>\n  </AppProvider>\n);\n\nexport default App;\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable global-require */\nconst initMocks = (): void => {\n  if (\n    process.env.NODE_ENV === 'development' &&\n    process.env.REACT_APP_API_MOCKING === 'true'\n  ) {\n    if (typeof window === 'undefined') {\n      const { server } = require('./server');\n      server.listen();\n    } else {\n      const { worker } = require('./browser');\n      worker.start();\n    }\n  }\n};\n\nexport default initMocks;\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable global-require */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport App from './App';\nimport initMock from '@/mocks';\n\ninitMock();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}